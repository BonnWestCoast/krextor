<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><title>XML source view</title><link rel="stylesheet" type="text/css" href="../xmlverbatim.css"></link></head><body class="xmlverb-default"><tt>
<!-- converted by xmlverbatim.xsl 1.1, (c) O. Becker -->
<div xmlns:xd="http://www.pnp-software.com/XSLTdoc" class="xmlverb-default">&lt;!--<span class="xmlverb-comment"><br></br>
    *  Copyright (C) 2008<br></br>
    *  Christoph Lange<br></br>
    *  KWARC, Jacobs University Bremen<br></br>
    *  http://kwarc.info/projects/krextor/<br></br>
    *<br></br>
    *   Krextor is free software; you can redistribute it and/or<br></br>
    *         modify it under the terms of the GNU Lesser General Public<br></br>
    *         License as published by the Free Software Foundation; either<br></br>
    *         version 2 of the License, or (at your option) any later version.<br></br>
    *<br></br>
    *         This program is distributed in the hope that it will be useful,<br></br>
    *         but WITHOUT ANY WARRANTY; without even the implied warranty of<br></br>
    *         MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU<br></br>
    *         Lesser General Public License for more details.<br></br>
    *<br></br>
    *         You should have received a copy of the GNU Lesser General Public<br></br>
    *         License along with this library; if not, write to the<br></br>
    *         Free Software Foundation, Inc., 59 Temple Place - Suite 330,<br></br>
    *         Boston, MA 02111-1307, USA.<br></br>
    * <br></br>
</span>--&gt;<br></br>
&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e2">stylesheet</a></span><span class="xmlverb-ns-name"> xmlns</span>="<span class="xmlverb-ns-uri">http://www.openmath.org/OpenMathCD</span>"<span class="xmlverb-ns-name"> xmlns:xsl</span>="<span class="xmlverb-ns-uri">http://www.w3.org/1999/XSL/Transform</span>"<span class="xmlverb-ns-name"> xmlns:om</span>="<span class="xmlverb-ns-uri">http://www.openmath.org/OpenMath</span>"<span class="xmlverb-ns-name"> xmlns:xs</span>="<span class="xmlverb-ns-uri">http://www.w3.org/2001/XMLSchema</span>"<span class="xmlverb-ns-name"> xmlns:cds</span>="<span class="xmlverb-ns-uri">http://www.openmath.org/OpenMathCDS</span>"<span class="xmlverb-ns-name"> xmlns:xd</span>="<span class="xmlverb-ns-uri">http://www.pnp-software.com/XSLTdoc</span>"<span class="xmlverb-ns-name"> xmlns:cdg</span>="<span class="xmlverb-ns-uri">http://www.openmath.org/OpenMathCDG</span>"<span class="xmlverb-ns-name"> xmlns:krextor</span>="<span class="xmlverb-ns-uri">http://kwarc.info/projects/krextor</span>"<span class="xmlverb-ns-name"> xmlns:m</span>="<span class="xmlverb-ns-uri">http://www.w3.org/1998/Math/MathML</span>"<span class="xmlverb-ns-name"> xmlns:krextor-genuri</span>="<span class="xmlverb-ns-uri">http://kwarc.info/projects/krextor/genuri</span>"<span class="xmlverb-ns-name"> xmlns:mcd</span>="<span class="xmlverb-ns-uri">http://www.w3.org/ns/mathml-cd</span>"<span class="xmlverb-ns-name"> xmlns:xi</span>="<span class="xmlverb-ns-uri">http://www.w3.org/2001/XInclude</span>" <span class="xmlverb-attr-name">xpath-default-namespace</span>="<span class="xmlverb-attr-content">http://www.openmath.org/OpenMathCD</span>" <span class="xmlverb-attr-name">exclude-result-prefixes</span>="<span class="xmlverb-attr-content">#all</span>" <span class="xmlverb-attr-name">version</span>="<span class="xmlverb-attr-content">2.0</span>"&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span><div class="xd">

    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d19e4">doc</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">stylesheet</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d19e6">short</a></span>&gt;<span class="xmlverb-text">Extraction module for </span>&lt;<span class="xmlverb-element-name"><a name="d19e8">a</a></span> <span class="xmlverb-attr-name">href</span>="<span class="xmlverb-attr-content">http://www.openmath.org</span>"&gt;<span class="xmlverb-text">OpenMath</span>&lt;/<span class="xmlverb-element-name">a</span>&gt;<span class="xmlverb-text"> content dictionaries (CDs)</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">short</span>&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d19e12">detail</a></span>&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-name"><a name="d19e14">p</a></span>&gt;<span class="xmlverb-text">This stylesheet extracts RDF from </span>&lt;<span class="xmlverb-element-name"><a name="d19e16">a</a></span> <span class="xmlverb-attr-name">href</span>="<span class="xmlverb-attr-content">http://www.openmath.org</span>"&gt;<span class="xmlverb-text">OpenMath</span>&lt;/<span class="xmlverb-element-name">a</span>&gt;<span class="xmlverb-text"> content dictionaries (CDs).</span>&lt;/<span class="xmlverb-element-name">p</span>&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-name"><a name="d19e20">p</a></span>&gt;<span class="xmlverb-text">CDs are either processed in their original form, or they are assumed to be split into fragments of interest, which are XIncluded by their parents (this corresponds to the way OpenMath CDs are used in the semantic wiki </span>&lt;<span class="xmlverb-element-name"><a name="d19e22">a</a></span> <span class="xmlverb-attr-name">href</span>="<span class="xmlverb-attr-content">http://kwarc.info/projects/swim/</span>"&gt;<span class="xmlverb-text">SWiM</span>&lt;/<span class="xmlverb-element-name">a</span>&gt;<span class="xmlverb-text">).</span>&lt;/<span class="xmlverb-element-name">p</span>&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-name"><a name="d19e26">p</a></span>&gt;<span class="xmlverb-text">Existing metadata vocabularies are reused, as documented in the ontology.</span>&lt;/<span class="xmlverb-element-name">p</span>&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-name"><a name="d19e29">p</a></span>&gt;<span class="xmlverb-text">See </span>&lt;<span class="xmlverb-element-name"><a name="d19e31">a</a></span> <span class="xmlverb-attr-name">href</span>="<span class="xmlverb-attr-content">https://svn.openmath.org/OpenMath3/owl</span>"&gt;<span class="xmlverb-text">https://svn.openmath.org/OpenMath3/owl</span>&lt;/<span class="xmlverb-element-name">a</span>&gt;<span class="xmlverb-text"> for the corresponding ontology.</span>&lt;/<span class="xmlverb-element-name">p</span>&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">detail</span>&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d19e36">author</a></span>&gt;<span class="xmlverb-text">Christoph Lange</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">author</span>&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d19e39">copyright</a></span>&gt;<span class="xmlverb-text">Christoph Lange, 2008</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">copyright</span>&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d19e42">svnId</a></span>&gt;<span class="xmlverb-text">$Id: ocd.xsl 1972 2011-04-16 23:11:44Z clange $</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">svnId</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
<br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e46">include</a></span> <span class="xmlverb-attr-name">href</span>="<span class="xmlverb-attr-content">util/openmath.xsl</span>" /&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e48">strip-space</a></span> <span class="xmlverb-attr-name">elements</span>="<span class="xmlverb-attr-content">*</span>" /&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span><div class="xd">

    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d19e50">doc</a></span>&gt;<span class="xmlverb-text"><br></br>
      </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d19e52">short</a></span>&gt;<span class="xmlverb-text">Are input documents split into fragments?</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">short</span>&gt;<span class="xmlverb-text"><br></br>
      </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d19e55">detail</a></span>&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d19e57">p</a></span>&gt;<span class="xmlverb-text">Do we assume that the input documents have been split into fragments of the size of knowledge items?</span>&lt;/<span class="xmlverb-element-name">p</span>&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d19e60">p</a></span>&gt;<span class="xmlverb-text">See </span>&lt;<span class="xmlverb-element-name"><a name="d19e62">a</a></span> <span class="xmlverb-attr-name">href</span>="<span class="xmlverb-attr-content">https://svn.salzburgresearch.at/svn/kiwi/IkeWiki/branches/SWiM/trunk/WEB-INF/src/at/srfg/ikewiki/render/import-ocd.xsl</span>"&gt;<span class="xmlverb-text">https://svn.salzburgresearch.at/svn/kiwi/IkeWiki/branches/SWiM/trunk/WEB-INF/src/at/srfg/ikewiki/render/import-ocd.xsl</span>&lt;/<span class="xmlverb-element-name">a</span>&gt;<span class="xmlverb-text"> for an implementation of splitting CDs as required by this extraction module.</span>&lt;/<span class="xmlverb-element-name">p</span>&gt;<span class="xmlverb-text"><br></br>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">detail</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e68">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">split-input</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:boolean</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">false()</span>" /&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span><div class="xd">

    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d19e71">doc</a></span>&gt;<span class="xmlverb-text"><br></br>
      </span>&lt;<span class="xmlverb-element-name"><a name="d19e73">p</a></span>&gt;<span class="xmlverb-text">In case of split input, we assume that its document base URIs and </span>&lt;<span class="xmlverb-element-name"><a name="d19e75">code</a></span>&gt;<span class="xmlverb-text">xml:id</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text">s have been initialized correctly.  Otherwise we generate OpenMath-compliant URIs ourselves.</span>&lt;/<span class="xmlverb-element-name">p</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e80">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">autogenerate-fragment-uris</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:string*</span>"&gt;<span class="xmlverb-text"><br></br>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e82">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">not($split-input)</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e84">sequence</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'openmath'</span>" /&gt;<span class="xmlverb-text"><br></br>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br></br>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e87">sequence</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'xml-id'</span>" /&gt;<span class="xmlverb-text"><br></br>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e89">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$split-input</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e91">sequence</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'document-root-base'</span>" /&gt;<span class="xmlverb-text"><br></br>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">param</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span><div class="xd">

    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d19e95">doc</a></span>&gt;<span class="xmlverb-text"><br></br>
      Top-level implementation of OpenMath-compliant URI generation; we delegate to per-element templates.<br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e98">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">krextor-genuri:openmath</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:anyURI?</span>"&gt;<span class="xmlverb-text"><br></br>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e100">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">node</span>" /&gt;<span class="xmlverb-text"><br></br>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e102">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">base-uri</span>" /&gt;<span class="xmlverb-text"><br></br>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e104">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$node</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor-genuri:openmath</span>"&gt;<span class="xmlverb-text"><br></br>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e106">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">openmath-cd-uri</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$base-uri</span>" /&gt;<span class="xmlverb-text"><br></br>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">apply-templates</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e110">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">CD</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor-genuri:openmath</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:anyURI?</span>"&gt;<span class="xmlverb-text"><br></br>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e112">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">openmath-cd-uri</span>" /&gt;<span class="xmlverb-text"><br></br>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e114">sequence</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$openmath-cd-uri</span>" /&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e117">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">CDDefinition</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor-genuri:openmath</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:anyURI?</span>"&gt;<span class="xmlverb-text"><br></br>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e119">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">openmath-cd-uri</span>" /&gt;<span class="xmlverb-text"><br></br>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e121">sequence</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">xs:anyURI( concat( $openmath-cd-uri, '#', normalize-space(Name[1])))</span>" /&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span>&lt;!--<span class="xmlverb-comment"> &lt;xsl:template match="property" mode="krextor-genuri:openmath" as="xs:anyURI?"&gt; </span>--&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;!--<span class="xmlverb-comment">   &lt;xsl:sequence select="xs:anyURI(concat('#', generate-id()))"/&gt; </span>--&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;!--<span class="xmlverb-comment"> &lt;/xsl:template&gt; </span>--&gt;<span class="xmlverb-text"><br></br>
    <br></br>
    </span><div class="xd">

    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d19e131">doc</a></span>&gt;<span class="xmlverb-text">Fail to generate an OpenMath URI for all elements for which none is specified, i.e. all elements except </span>&lt;<span class="xmlverb-element-name"><a name="d19e133">code</a></span>&gt;<span class="xmlverb-text">CD</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text"> and </span>&lt;<span class="xmlverb-element-name"><a name="d19e136">code</a></span>&gt;<span class="xmlverb-text">CDDefinition</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e139">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">*</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor-genuri:openmath</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:anyURI?</span>" /&gt;<span class="xmlverb-text"><br></br>
    <br></br>
    </span><div class="xd">

    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d19e141">doc</a></span>&gt;<span class="xmlverb-text">Easy XML → RDF mappings</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e144">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:resources</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d19e146">CD</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#ContentDictionary</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d19e148">CDDefinition</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#SymbolDefinition</span>" <span class="xmlverb-attr-name">related-via-properties</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#definesSymbol</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;!--<span class="xmlverb-comment"> OpenMath 3 transition: no specific types known yet </span>--&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d19e152">description</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#OpenMathConcept</span>" <span class="xmlverb-attr-name">related-via-properties</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#hasDirectPart</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;!--<span class="xmlverb-comment"> OpenMath 3 transition: no specific types known yet </span>--&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d19e157">discussion</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#OpenMathConcept</span>" <span class="xmlverb-attr-name">related-via-properties</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#hasDirectPart</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d19e159">Pragmatic</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#PragmaticSyntax</span>" <span class="xmlverb-attr-name">related-via-properties</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#hasPragmaticSyntax</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d19e161">Example</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#Example</span>" <span class="xmlverb-attr-name">related-via-properties</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#exemplifiedBy</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;!--<span class="xmlverb-comment"> OpenMath 3 transition: allow MMLexample here, too </span>--&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d19e165">MMLexample</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#Example</span>" <span class="xmlverb-attr-name">related-via-properties</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#exemplifiedBy</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">cdg</span>:<span class="xmlverb-element-name"><a name="d19e167">CDGroup</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#ContentDictionaryGroup</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">cds</span>:<span class="xmlverb-element-name"><a name="d19e170">CDSignatures</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#SignatureDictionary</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">cds</span>:<span class="xmlverb-element-name"><a name="d19e172">Signature</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#Signature</span>" <span class="xmlverb-attr-name">related-via-properties</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#containsSignature</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">mcd</span>:<span class="xmlverb-element-name"><a name="d19e174">notations</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#NotationDictionary</span>" /&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">variable</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e177">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">(: for CD, see below; it gets special treatment :) CD| CDDefinition| description| discussion| Pragmatic| Example| MMLexample| cdg:CDGroup| cds:CDSignatures| cds:Signature| mcd:notations</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:main</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e179">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">.</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:create-resource</span>" /&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e182">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">/</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:main</span>"&gt;<span class="xmlverb-text"><br></br>
      </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e184">choose</a></span>&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e186">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">not($split-input)</span>"&gt;<span class="xmlverb-text"><br></br>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e188">apply-imports</a></span>&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e190">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:base-uri</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">xs:anyURI( concat( normalize-space(/CD/CDBase[1]), '/', normalize-space(/CD/CDName[1])))</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:anyURI</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br></br>
          </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">apply-imports</span>&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e194">otherwise</a></span>&gt;<span class="xmlverb-text"><br></br>
          </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e196">apply-imports</a></span> /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">otherwise</span>&gt;<span class="xmlverb-text"><br></br>
      </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e202">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:literal-properties</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;!--<span class="xmlverb-comment"> TODO reconsider whether dct:identifier actually is the right property<br></br>
             See discussion in the OpenMath ontology source </span>--&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d19e206">Name</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://purl.org/dc/terms/identifier</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d19e208">CDName</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://purl.org/dc/terms/identifier</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d19e210">Description</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://purl.org/dc/terms/description</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d19e212">Title</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://purl.org/dc/terms/title</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d19e215">CDDate</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://purl.org/dc/terms/date</span>" <span class="xmlverb-attr-name">datatype</span>="<span class="xmlverb-attr-content">http://www.w3.org/2001/XMLSchema#date</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d19e217">CDComment</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://www.w3.org/2000/01/rdf-schema#comment</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d19e219">CDReviewDate</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#reviewDate</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">cds</span>:<span class="xmlverb-element-name"><a name="d19e221">CDSReviewDate</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#reviewDate</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d19e223">CDVersion</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#version</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">cdg</span>:<span class="xmlverb-element-name"><a name="d19e225">CDGroupVersion</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#version</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d19e228">CDRevision</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#revision</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">cdg</span>:<span class="xmlverb-element-name"><a name="d19e230">CDGroupRevision</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#revision</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d19e232">CDURL</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#url</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">cdg</span>:<span class="xmlverb-element-name"><a name="d19e234">CDGroupURL</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#url</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;!--<span class="xmlverb-comment">  for now we store this as a literal, as SWiM does not yet support URI properties with external objects </span>--&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d19e238">CDBase</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#base</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d19e241">CMP</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#text</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">variable</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e244">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">Name| CDName| Description| Title| CDDate| CDComment| CDReviewDate| cds:CDSReviewDate| CDVersion| cdg:CDGroupVersion| CDRevision| cdg:CDGroupRevision| CDURL| cdg:CDGroupURL| (: for now we store this as a literal, as SWiM does not yet support URI properties with external objects :) CDBase| CMP</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:main</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e246">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">.</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:add-literal-property</span>" /&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span>&lt;!--<span class="xmlverb-comment"> Special cases start here </span>--&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e251">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">Role</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:main</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e253">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e255">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#role'</span>" /&gt;<span class="xmlverb-text"><br></br>
             </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e257">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">object</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">concat('http://www.openmath.org/ontology#', krextor:dashes-to-camelcase(normalize-space(.)))</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e261">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">CDStatus|cds:CDSStatus</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:main</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e263">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e265">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#status'</span>" /&gt;<span class="xmlverb-text"><br></br>
             </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e267">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">object</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">concat('http://www.openmath.org/ontology#', krextor:dashes-to-camelcase(normalize-space(.)))</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span><div class="xd">

    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d19e271">doc</a></span>&gt;<span class="xmlverb-text">A property group as suggested for OpenMath 3:  </span>&lt;<span class="xmlverb-element-name"><a name="d19e273">code</a></span>&gt;<span class="xmlverb-text">&amp;lt;property&amp;gt;&amp;lt;CMP/&amp;gt;&amp;lt;FMP/&amp;gt;&amp;lt;/property&amp;gt;</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e277">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:main</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e279">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-resource</span>"&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e281">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#hasProperty'</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e283">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#Property'</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text">    <br></br>
<br></br>
    </span><div class="xd">

    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d19e287">doc</a></span>&gt;<span class="xmlverb-text">Groups ungrouped OpenMath-2-style properties</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e290">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">CDDefinition/*[self::CMP or self::FMP[not(preceding-sibling::*[1][self::CMP])]]</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:main</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e292">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:apply-templates</span>"&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e294">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">node</span>"&gt;<span class="xmlverb-text"><br></br>
                </span>&lt;!--<span class="xmlverb-comment"> create a synthetic property element </span>--&gt;<span class="xmlverb-text"><br></br>
                </span>&lt;<span class="xmlverb-element-name"><a name="d19e298">property</a></span> <span class="xmlverb-attr-name">xml:id</span>="<span class="xmlverb-attr-content">{normalize-space(parent::CDDefinition/Name)}.prop{count(preceding-sibling::CMP|preceding-sibling::FMP)}</span>"&gt;<span class="xmlverb-text"><br></br>
                    </span>&lt;!--<span class="xmlverb-comment"> copy the currently matched element (CMP or FMP) </span>--&gt;<span class="xmlverb-text"><br></br>
                    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e302">copy-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">.</span>" /&gt;<span class="xmlverb-text"> <br></br>
                    </span>&lt;!--<span class="xmlverb-comment"> assume that an FMP following a CMP belongs to the same property </span>--&gt;<span class="xmlverb-text"><br></br>
                    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e306">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">self::CMP</span>"&gt;<span class="xmlverb-text"><br></br>
                        </span>&lt;!--<span class="xmlverb-comment"> if no following FMP exists, nothing is copied </span>--&gt;<span class="xmlverb-text"><br></br>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e310">copy-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">following-sibling::*[1][self::FMP]</span>" /&gt;<span class="xmlverb-text"><br></br>
                    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br></br>
                </span>&lt;/<span class="xmlverb-element-name">property</span>&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">with-param</span>&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
 <br></br>
    </span><div class="xd">

    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d19e317">doc</a></span>&gt;<span class="xmlverb-text">We assume that any FMP has been grouped with a CMP before</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e320">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">property/FMP</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:main</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e322">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-literal-property</span>"&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e324">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#openMath'</span>" /&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;!--<span class="xmlverb-comment"> here, the OMOBJ child becomes the object by default </span>--&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e329">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-literal-property</span>"&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e331">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#contentMathML'</span>" /&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e333">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">object</span>"&gt;<span class="xmlverb-text"><br></br>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e335">apply-templates</a></span> <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">om2cmml</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">om:OMOBJ</span>" /&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">with-param</span>&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e339">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-literal-property</span>"&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e341">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#popcorn'</span>" /&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e343">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">object</span>"&gt;<span class="xmlverb-text"><br></br>
              </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e345">apply-templates</a></span> <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">pop</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">om:OMOBJ</span>" /&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">with-param</span>&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text">    <br></br>
<br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e350">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">@type[parent::cds:CDSignatures]</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:main</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;!--<span class="xmlverb-comment"> Currently we assume that @cd is a CD name (in fact a relative URI) to be resolved against the base URI. </span>--&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e354">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e356">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#typeSystem'</span>" /&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;!--<span class="xmlverb-comment"> resolve against the @cdbase if that is available.<br></br>
                 We assume that @cdbase defines the base both for<br></br>
                 @cd and for @type. </span>--&gt;<span class="xmlverb-text"><br></br>
             </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e360">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">object</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">resolve-uri(., om:cdbase-or-default(../@cdbase))</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e365">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">@cd[parent::cds:CDSignatures]</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:main</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e367">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e369">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#containsSignaturesFor'</span>" /&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;!--<span class="xmlverb-comment"> resolve against the @cdbase if that is available.<br></br>
            We assume that @cdbase defines the base both for<br></br>
            @cd and for @type. </span>--&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e373">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">object</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">resolve-uri(., om:cdbase-or-default(../@cdbase))</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e377">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">@name[parent::cds:Signature[@cd]]</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:main</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e379">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e381">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#typesSymbol'</span>" /&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;!--<span class="xmlverb-comment"> In SWiM, a Signature element is assumed to carry @cdbase and @cd attributes, cf. the discussion of 2008/05/10 on the OM3 mailing list </span>--&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e385">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">object</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">om:symbol-uri((ancestor::*/@cdbase)[last()], ../@cd, .)</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e389">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mcd:notation</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:main</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e391">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">parent::mcd:notations and not(preceding-sibling::mcd:notation)</span>"&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e393">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">.</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:link-notation-to-cd</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e396">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-resource</span>"&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e398">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#containsNotationDefinition'</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e400">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#Notation'</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e404">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mcd:notation</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:link-notation-to-cd</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;!--<span class="xmlverb-comment"><br></br>
        Here we assume that the mcd:notations element itself does not point to<br></br>
        a cdbase or a cd, that its mcd:notation children don't do it either,<br></br>
        but that the prototypes do it (implicitly), and that, of course, there<br></br>
        is a prototype.<br></br>
<br></br>
        We assume that all prototypes in one notation dictionary point to to<br></br>
        the same cdbase and cd, therefore we look up these targets from the<br></br>
        first child.<br></br>
        </span>--&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e408">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">symbol</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">om:matched-symbol(mcd:prototype[1])</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e410">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;!--<span class="xmlverb-comment"> implicit subject is the notation dictionary </span>--&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e414">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#containsNotationsFor'</span>" /&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;!--<span class="xmlverb-comment"> resolve against the @cdbase if that is available </span>--&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e418">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">object</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">resolve-uri($symbol/@cd, om:cdbase-or-default($symbol/@cdbase))</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e422">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mcd:prototype[not(preceding-sibling::mcd:prototype)]</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:main</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e424">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">symbol</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">om:matched-symbol(.)</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e426">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;!--<span class="xmlverb-comment"> the enclosing mcd:notation is the subject </span>--&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e430">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#rendersSymbol'</span>" /&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e432">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">object</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">om:symbol-uri(om:cdbase-or-default($symbol/@cdbase), $symbol/@cd, $symbol/@name)</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span>&lt;!--<span class="xmlverb-comment"> CDUses is not extracted but computed </span>--&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span>&lt;!--<span class="xmlverb-comment"> TODO for containment within the same file, either consider @xml:id or target of @href </span>--&gt;<span class="xmlverb-text"><br></br>
        <br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e441">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">CDDefinition</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:included</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e443">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e445">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#containsSymbolDefinition'</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e449">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">description</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:included</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e451">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;!--<span class="xmlverb-comment"> OpenMath 3 transition: no specific type known yet </span>--&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e455">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#hasDirectPart'</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e459">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">discussion</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:included</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e461">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;!--<span class="xmlverb-comment"> OpenMath 3 transition: no specific type known yet </span>--&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e465">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#hasDirectPart'</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e469">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:included</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e471">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e473">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#hasProperty'</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e477">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">Pragmatic</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:included</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e479">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e481">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#hasPragmaticSyntax'</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span>&lt;!--<span class="xmlverb-comment"> OpenMath 3 transition: allow MMLexample here, too </span>--&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e488">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">MMLexample|Example</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:included</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e490">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e492">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#exemplifiedBy'</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e496">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">om:OMOBJ//om:OMS</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:main</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e498">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e500">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#usesSymbol'</span>" /&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;!--<span class="xmlverb-comment"> use the innermost cdbase attribute. At least the OMOBJ must have a cdbase attribute,<br></br>
                 or otherwise the default is assumed </span>--&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e504">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">object</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">om:symbol-uri((ancestor-or-self::om:*/@cdbase)[last()], @cd, @name)</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
        <br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e508">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">cdg:CDGroupMember</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:main</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e510">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e512">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#containsContentDictionary'</span>" /&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;!--<span class="xmlverb-comment"> We ignore the CDVersion for now </span>--&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;!--<span class="xmlverb-comment"> If the CDURL is given, use it. Otherwise, resolve CDName against the CDGroupURL, as specified in section 4.4.2.2 of the OpenMath 2.0 Specification. </span>--&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e518">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">object</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if (cdg:CDURL) then cdg:CDURL/text() else resolve-uri(cdg:CDName/text(), ../cdg:CDGroupURL)</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e522">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">cds:Signature</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:included</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e524">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e526">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#containsSignature'</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
<br></br>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e530">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mcd:notation</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:included</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e532">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:parent-element</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br></br>
<br></br>
        </span>&lt;!--<span class="xmlverb-comment"><br></br>
        Here, we assume that mcd:notations cannot have children other than<br></br>
        mcd:notation (which is the case in MathML 3).<br></br>
        </span>--&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e536">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">not($krextor:parent-element/preceding-sibling::mcd:notation| $krextor:parent-element/preceding-sibling::xi:include)</span>"&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e538">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">.</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:link-notation-to-cd</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e541">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d19e543">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#containsNotationDefinition'</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span>&lt;!--<span class="xmlverb-comment"> TODO:<br></br>
    Classes:<br></br>
    CDBase<br></br>
    </span>--&gt;<span class="xmlverb-text"><br></br>
</span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">stylesheet</span>&gt;<br></br>
</div>
</tt><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br>v
         </body></html>
