
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><title>XML source view</title><link rel="stylesheet" type="text/css" href="../xmlverbatim.css"/></head><body class="xmlverb-default"><tt>
<!-- converted by xmlverbatim.xsl 1.1, (c) O. Becker -->
<div xmlns:xd="http://www.pnp-software.com/XSLTdoc" class="xmlverb-default">&lt;!--<span class="xmlverb-comment"><br/>
    *  Copyright (C) 2008<br/>
    *  Christoph Lange<br/>
    *  Jacobs University Bremen<br/>
    *<br/>
    *   Krextor is free software; you can redistribute it and/or<br/>
    *         modify it under the terms of the GNU Lesser General Public<br/>
    *         License as published by the Free Software Foundation; either<br/>
    *         version 2 of the License, or (at your option) any later version.<br/>
    *<br/>
    *         This program is distributed in the hope that it will be useful,<br/>
    *         but WITHOUT ANY WARRANTY; without even the implied warranty of<br/>
    *         MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU<br/>
    *         Lesser General Public License for more details.<br/>
    *<br/>
    *         You should have received a copy of the GNU Lesser General Public<br/>
    *         License along with this library; if not, write to the<br/>
    *         Free Software Foundation, Inc., 59 Temple Place - Suite 330,<br/>
    *         Boston, MA 02111-1307, USA.<br/>
    * <br/>
</span>--&gt;<br/>
&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e2">stylesheet</a></span><span class="xmlverb-ns-name"> xmlns:m</span>="<span class="xmlverb-ns-uri">http://www.w3.org/1998/Math/MathML</span>"<span class="xmlverb-ns-name"> xmlns:mcd</span>="<span class="xmlverb-ns-uri">http://www.w3.org/ns/mathml-cd</span>"<span class="xmlverb-ns-name"> xmlns:cd</span>="<span class="xmlverb-ns-uri">http://www.openmath.org/OpenMathCD</span>"<span class="xmlverb-ns-name"> xmlns:xsl</span>="<span class="xmlverb-ns-uri">http://www.w3.org/1999/XSL/Transform</span>"<span class="xmlverb-ns-name"> xmlns:xi</span>="<span class="xmlverb-ns-uri">http://www.w3.org/2001/XInclude</span>"<span class="xmlverb-ns-name"> xmlns:om</span>="<span class="xmlverb-ns-uri">http://www.openmath.org/OpenMath</span>"<span class="xmlverb-ns-name"> xmlns</span>="<span class="xmlverb-ns-uri">http://www.openmath.org/OpenMathCD</span>"<span class="xmlverb-ns-name"> xmlns:xd</span>="<span class="xmlverb-ns-uri">http://www.pnp-software.com/XSLTdoc</span>"<span class="xmlverb-ns-name"> xmlns:krextor</span>="<span class="xmlverb-ns-uri">http://kwarc.info/projects/krextor</span>"<span class="xmlverb-ns-name"> xmlns:ocds</span>="<span class="xmlverb-ns-uri">http://www.openmath.org/OpenMathCDS</span>"<span class="xmlverb-ns-name"> xmlns:ocdg</span>="<span class="xmlverb-ns-uri">http://www.openmath.org/OpenMathCDG</span>" <span class="xmlverb-attr-name">xpath-default-namespace</span>="<span class="xmlverb-attr-content">http://www.openmath.org/OpenMathCD</span>" <span class="xmlverb-attr-name">exclude-result-prefixes</span>="<span class="xmlverb-attr-content">#all</span>" <span class="xmlverb-attr-name">version</span>="<span class="xmlverb-attr-content">2.0</span>"&gt;<span class="xmlverb-text"><br/>
<br/>
    </span><div class="xd">

    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d17e4">doc</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">stylesheet</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d17e6">short</a></span>&gt;<span class="xmlverb-text">Extraction module for </span>&lt;<span class="xmlverb-element-name"><a name="d17e8">a</a></span> <span class="xmlverb-attr-name">href</span>="<span class="xmlverb-attr-content">http://www.openmath.org</span>"&gt;<span class="xmlverb-text">OpenMath</span>&lt;/<span class="xmlverb-element-name">a</span>&gt;<span class="xmlverb-text"> content dictionaries (CDs)</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">short</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d17e12">detail</a></span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d17e14">p</a></span>&gt;<span class="xmlverb-text">This stylesheet extracts RDF from </span>&lt;<span class="xmlverb-element-name"><a name="d17e16">a</a></span> <span class="xmlverb-attr-name">href</span>="<span class="xmlverb-attr-content">http://www.openmath.org</span>"&gt;<span class="xmlverb-text">OpenMath</span>&lt;/<span class="xmlverb-element-name">a</span>&gt;<span class="xmlverb-text"> content dictionaries (CDs).  Currently, RDF is only extracted from top-level elements. CDs are assumed to be split into fragments of interest, which are XIncluded by their parents.  This corresponds to the way OpenMath CDs are used in the semantic wiki </span>&lt;<span class="xmlverb-element-name"><a name="d17e19">a</a></span> <span class="xmlverb-attr-name">href</span>="<span class="xmlverb-attr-content">http://kwarc.info/projects/swim/</span>"&gt;<span class="xmlverb-text">SWiM</span>&lt;/<span class="xmlverb-element-name">a</span>&gt;<span class="xmlverb-text">.</span>&lt;/<span class="xmlverb-element-name">p</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d17e23">p</a></span>&gt;<span class="xmlverb-text">Existing metadata vocabularies are reused, as documented in the ontology.</span>&lt;/<span class="xmlverb-element-name">p</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d17e26">p</a></span>&gt;<span class="xmlverb-text">See </span>&lt;<span class="xmlverb-element-name"><a name="d17e28">a</a></span> <span class="xmlverb-attr-name">href</span>="<span class="xmlverb-attr-content">https://svn.openmath.org/OpenMath3/owl</span>"&gt;<span class="xmlverb-text">https://svn.openmath.org/OpenMath3/owl</span>&lt;/<span class="xmlverb-element-name">a</span>&gt;<span class="xmlverb-text"> for the corresponding ontology.</span>&lt;/<span class="xmlverb-element-name">p</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">detail</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d17e33">author</a></span>&gt;<span class="xmlverb-text">Christoph Lange</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">author</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d17e36">copyright</a></span>&gt;<span class="xmlverb-text">Christoph Lange, 2008</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">copyright</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d17e39">svnId</a></span>&gt;<span class="xmlverb-text">$Id: ocd.xsl 610 2008-12-19 00:15:56Z clange $</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">svnId</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e43">include</a></span> <span class="xmlverb-attr-name">href</span>="<span class="xmlverb-attr-content">util/openmath.xsl</span>" /&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e45">strip-space</a></span> <span class="xmlverb-attr-name">elements</span>="<span class="xmlverb-attr-content">*</span>" /&gt;<span class="xmlverb-text"><br/>
    <br/>
    </span><div class="xd">

    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d17e47">doc</a></span>&gt;<span class="xmlverb-text">Easy XML -&amp;gt; RDF mappings</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e50">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:resources</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d17e52">CD</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#ContentDictionary</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d17e54">CDDefinition</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#SymbolDefinition</span>" <span class="xmlverb-attr-name">related-via-properties</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#containsSymbolDefinition</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;!--<span class="xmlverb-comment"> OpenMath 3 transition: no specific types known yet </span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d17e58">description</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#OpenMathConcept</span>" <span class="xmlverb-attr-name">related-via-properties</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#hasDirectPart</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;!--<span class="xmlverb-comment"> OpenMath 3 transition: no specific types known yet </span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d17e63">discussion</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#OpenMathConcept</span>" <span class="xmlverb-attr-name">related-via-properties</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#hasDirectPart</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d17e65">Pragmatic</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#PragmaticGuidelines</span>" <span class="xmlverb-attr-name">related-via-properties</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#hasPragmaticGuidelines</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d17e67">Example</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#Example</span>" <span class="xmlverb-attr-name">related-via-properties</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#hasExample</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;!--<span class="xmlverb-comment"> OpenMath 3 transition: allow MMLexample here, too </span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d17e71">MMLexample</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#Example</span>" <span class="xmlverb-attr-name">related-via-properties</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#hasExample</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">ocdg</span>:<span class="xmlverb-element-name"><a name="d17e73">CDGroup</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#ContentDictionaryGroup</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">ocds</span>:<span class="xmlverb-element-name"><a name="d17e76">CDSignatures</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#SignatureDictionary</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">ocds</span>:<span class="xmlverb-element-name"><a name="d17e78">Signature</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#Signature</span>" <span class="xmlverb-attr-name">related-via-properties</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#containsSignature</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">mcd</span>:<span class="xmlverb-element-name"><a name="d17e80">notations</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#NotationDictionary</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">variable</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e84">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">CD| CDDefinition| description| discussion| Pragmatic| Example| MMLexample| ocdg:CDGroup| ocds:CDSignatures| ocds:Signature| mcd:notations</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e86">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">.</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:create-resource</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text">    <br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e89">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:literal-properties</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;!--<span class="xmlverb-comment"> TODO reconsider whether dc:identifier actually is the right property<br/>
             See discussion in the OpenMath ontology source </span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d17e93">Name</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://purl.org/dc/elements/1.1/identifier</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d17e95">CDName</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://purl.org/dc/elements/1.1/identifier</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d17e97">Description</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://purl.org/dc/elements/1.1/description</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d17e99">Title</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://purl.org/dc/elements/1.1/title</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d17e102">CDDate</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://purl.org/dc/elements/1.1/date</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d17e104">CDComment</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://www.w3.org/2000/01/rdf-schema#comment</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d17e106">CDReviewDate</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#reviewDate</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">ocds</span>:<span class="xmlverb-element-name"><a name="d17e108">CDSReviewDate</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#reviewDate</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d17e110">CDStatus</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#status</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">ocds</span>:<span class="xmlverb-element-name"><a name="d17e112">CDSStatus</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#status</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d17e115">CDVersion</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#version</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">ocdg</span>:<span class="xmlverb-element-name"><a name="d17e117">CDGroupVersion</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#version</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d17e119">CDRevision</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#revision</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">ocdg</span>:<span class="xmlverb-element-name"><a name="d17e121">CDGroupRevision</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#revision</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d17e123">CDURL</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#url</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">ocdg</span>:<span class="xmlverb-element-name"><a name="d17e125">CDGroupURL</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#url</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;!--<span class="xmlverb-comment">  for now we store this as a literal, as SWiM does not yet support URI properties with external objects </span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d17e130">CDBase</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#base</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d17e132">Role</a></span> <span class="xmlverb-attr-name">property</span>="<span class="xmlverb-attr-content">http://www.openmath.org/ontology#role</span>" <span class="xmlverb-attr-name">normalize-space</span>="<span class="xmlverb-attr-content">true</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">variable</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e135">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">Name| CDName| Description| Title| CDDate| CDComment| CDReviewDate| ocds:CDSReviewDate| CDStatus| ocds:CDSStatus| CDVersion| ocdg:CDGroupVersion| CDRevision| ocdg:CDGroupRevision| CDURL| ocdg:CDGroupURL| (: for now we store this as a literal, as SWiM does not yet support URI properties with external objects :) CDBase| Role</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e137">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">.</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:add-literal-property</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;!--<span class="xmlverb-comment"> Special cases </span>--&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e142">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">property</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e144">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-resource</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e146">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#hasProperty'</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e148">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#Property'</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> FIXME remove when OpenMath 3 is stable, as then we'll always<br/>
            have CMPs and FMPs inside properties, no longer ones that are<br/>
            direct children of CDDefinition </span>--&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e152">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">inside-property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">true()</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text">    <br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e156">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">CMP</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e158">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-resource</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> This is for OpenMath 2 backwards compatibility.  In OpenMath 3, this<br/>
                 will only be a child of property. </span>--&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e162">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if (parent::CDDefinition) then 'http://www.openmath.org/ontology#hasCommentedProperty' else 'http://www.openmath.org/ontology#hasCommentedPart'</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e164">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#CommentedProperty'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text">    <br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e169">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">FMP</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e171">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-resource</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> This is for OpenMath 2 backwards compatibility.  In OpenMath 3, this<br/>
                 will only be a child of property. </span>--&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e175">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if (parent::CDDefinition) then 'http://www.openmath.org/ontology#hasFormalProperty' else 'http://www.openmath.org/ontology#hasFormalPart'</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e177">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#FormalProperty'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text">    <br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e181">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">@type[parent::ocds:CDSignatures]</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;!--<span class="xmlverb-comment"> Currently we assume that @cd is a CD name (in fact a relative URI) to be resolved against the base URI. </span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e185">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e187">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#typeSystem'</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> resolve against the @cdbase if that is available.<br/>
                 We assume that @cdbase defines the base both for<br/>
                 @cd and for @type. </span>--&gt;<span class="xmlverb-text"><br/>
             </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e191">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">object</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">resolve-uri(., om:cdbase-or-default(../@cdbase))</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e195">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">@cd[parent::ocds:CDSignatures]</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e197">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e199">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#containsSignaturesFor'</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> resolve against the @cdbase if that is available.<br/>
            We assume that @cdbase defines the base both for<br/>
            @cd and for @type. </span>--&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e203">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">object</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">resolve-uri(., om:cdbase-or-default(../@cdbase))</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e207">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">@name[parent::ocds:Signature[@cd]]</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e209">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e211">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#typesSymbol'</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> In SWiM, a Signature element is assumed to carry @cdbase and @cd attributes, cf. the discussion of 2008/05/10 on the OM3 mailing list </span>--&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e215">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">object</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">om:symbol-uri((ancestor::*/@cdbase)[last()], ../@cd, .)</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span><div class="xd">

    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d17e219">doc</a></span>&gt;<span class="xmlverb-text">Determine the symbol that a prototype matches.  Returns a dummy element with @cdbase, @cd, and @name attributes.</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e222">function</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:matched-symbol</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;!--<span class="xmlverb-comment"> the mcd:prototype element </span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e226">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">prototype</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e228">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">symbol</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$prototype/((.|om:OMA|om:OMBIND|om:OMATTR/om:OMATP)/om:OMS|(.|m:apply|m:bind)/m:csymbol|m:semantics/m:annotation-xml)[1]</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">krextor</span>:<span class="xmlverb-element-name"><a name="d17e230">_</a></span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e232">for-each</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">('cdbase', 'cd', 'name')</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e234">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">attribute</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$symbol/@*[local-name() eq current()]</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e236">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$attribute</span>"&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e238">attribute</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">{current()}</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$attribute</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">for-each</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">krextor</span>:<span class="xmlverb-element-name">_</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">function</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e245">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mcd:notation</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e247">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">parent::mcd:notations and not(preceding-sibling::mcd:notation)</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e249">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">.</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:link-notation-to-cd</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
<br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e252">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-resource</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e254">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#containsNotationDefinition'</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e256">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#Notation'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e260">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mcd:notation</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:link-notation-to-cd</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;!--<span class="xmlverb-comment"><br/>
        Here we assume that the mcd:notations element itself does not point to<br/>
        a cdbase or a cd, that its mcd:notation children don't do it either,<br/>
        but that the prototypes do it (implicitly), and that, of course, there<br/>
        is a prototype.<br/>
<br/>
        We assume that all prototypes in one notation dictionary point to to<br/>
        the same cdbase and cd, therefore we look up these targets from the<br/>
        first child.<br/>
        </span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e264">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">symbol</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">krextor:matched-symbol(mcd:prototype[1])</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e266">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> implicit subject is the notation dictionary </span>--&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e270">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#containsNotationsFor'</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> resolve against the @cdbase if that is available </span>--&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e274">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">object</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">resolve-uri($symbol/@cd, om:cdbase-or-default($symbol/@cdbase))</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e278">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mcd:prototype[not(preceding-sibling::mcd:prototype)]</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e280">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">symbol</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">krextor:matched-symbol(.)</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e282">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> the mcd:notation is the subject </span>--&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e286">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#rendersSymbol'</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e288">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">object</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">om:symbol-uri(om:cdbase-or-default($symbol/@cdbase), $symbol/@cd, $symbol/@name)</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;!--<span class="xmlverb-comment"> CDUses is not extracted but computed </span>--&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;!--<span class="xmlverb-comment"> TODO for containment within the same file, either consider @xml:id or target of @href </span>--&gt;<span class="xmlverb-text"><br/>
        <br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e296">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">CDDefinition</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:included</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e298">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e300">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#containsSymbolDefinition'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e305">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">description</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:included</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e307">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> OpenMath 3 transition: no specific type known yet </span>--&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e311">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#hasDirectPart'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e315">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">discussion</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:included</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e317">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> OpenMath 3 transition: no specific type known yet </span>--&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e321">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#hasDirectPart'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e325">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:included</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e327">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e329">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#hasProperty'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span><div class="xd">

    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d17e333">doc</a></span>&gt;<span class="xmlverb-text">This is for OpenMath 2 backwards compatibility.  In OpenMath 3, this will be a child of property.</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e336">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">CMP</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:included</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;!--<span class="xmlverb-comment"> FIXME remove when OpenMath 3 is stable, as then we'll always<br/>
        have CMPs and FMPs inside properties, no longer ones that are<br/>
        direct children of CDDefinition </span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e340">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">inside-property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">false()</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e342">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e344">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if ($inside-property) then 'http://www.openmath.org/ontology#hasCommentedPart' else 'http://www.openmath.org/ontology#hasCommentedProperty'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span><div class="xd">

    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d17e348">doc</a></span>&gt;<span class="xmlverb-text">This is for OpenMath 2 backwards compatibility.  In OpenMath 3, this will be a child of property.</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e352">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">FMP</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:included</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;!--<span class="xmlverb-comment"> FIXME remove when OpenMath 3 is stable, as then we'll always<br/>
        have CMPs and FMPs inside properties, no longer ones that are<br/>
        direct children of CDDefinition </span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e356">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">inside-property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">false()</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e358">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e360">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if ($inside-property) then 'http://www.openmath.org/ontology#hasFormalPart' else 'http://www.openmath.org/ontology#hasFormalProperty'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e364">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">Pragmatic</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:included</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e366">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e368">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#hasPragmaticGuidelines'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;!--<span class="xmlverb-comment"> OpenMath 3 transition: allow MMLexample here, too </span>--&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e374">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">MMLexample|Example</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:included</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e376">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e378">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#hasExample'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e382">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">om:OMOBJ//om:OMS</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e384">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e386">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#usesSymbol'</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> use the innermost cdbase attribute. At least the OMOBJ must have a cdbase attribute,<br/>
                 or otherwise the default is assumed </span>--&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e390">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">object</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">om:symbol-uri((ancestor-or-self::om:*/@cdbase)[last()], @cd, @name)</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
        <br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e394">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">ocdg:CDGroupMember</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e396">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e398">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#containsContentDictionary'</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> We ignore the CDVersion for now </span>--&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> If the CDURL is given, use it. Otherwise, resolve CDName against the CDGroupURL, as specified in section 4.4.2.2 of the OpenMath 2.0 Specification. </span>--&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e404">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">object</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if (ocdg:CDURL) then ocdg:CDURL/text() else resolve-uri(ocdg:CDName/text(), ../ocdg:CDGroupURL)</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e409">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">ocds:Signature</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:included</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e411">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e413">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#containsSignature'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e417">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">mcd:notation</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:included</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e419">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:parent-element</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
<br/>
        </span>&lt;!--<span class="xmlverb-comment"><br/>
        Here, we assume that mcd:notations cannot have children other than<br/>
        mcd:notation (which is the case in MathML 3).<br/>
        </span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e423">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">not($krextor:parent-element/preceding-sibling::mcd:notation| $krextor:parent-element/preceding-sibling::xi:include)</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e425">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">.</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:link-notation-to-cd</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
<br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e428">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d17e430">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.openmath.org/ontology#containsNotationDefinition'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;!--<span class="xmlverb-comment"> TODO:<br/>
    Classes:<br/>
    CDBase<br/>
    </span>--&gt;<span class="xmlverb-text"><br/>
</span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">stylesheet</span>&gt;<br/>
</div>
</tt><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>v
         </body></html>
