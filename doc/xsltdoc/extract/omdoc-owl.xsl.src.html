
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><title>XML source view</title><link rel="stylesheet" type="text/css" href="../xmlverbatim.css"/></head><body class="xmlverb-default"><tt>
<!-- converted by xmlverbatim.xsl 1.1, (c) O. Becker -->
<div xmlns:xd="http://www.pnp-software.com/XSLTdoc" class="xmlverb-default">&lt;!--<span class="xmlverb-comment"><br/>
    *  Copyright (C) 2008<br/>
    *  Christoph Lange<br/>
    *  Jacobs University Bremen<br/>
    *<br/>
    *   Krextor is free software; you can redistribute it and/or<br/>
    *         modify it under the terms of the GNU Lesser General Public<br/>
    *         License as published by the Free Software Foundation; either<br/>
    *         version 2 of the License, or (at your option) any later version.<br/>
    *<br/>
    *         This program is distributed in the hope that it will be useful,<br/>
    *         but WITHOUT ANY WARRANTY; without even the implied warranty of<br/>
    *         MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU<br/>
    *         Lesser General Public License for more details.<br/>
    *<br/>
    *         You should have received a copy of the GNU Lesser General Public<br/>
    *         License along with this library; if not, write to the<br/>
    *         Free Software Foundation, Inc., 59 Temple Place - Suite 330,<br/>
    *         Boston, MA 02111-1307, USA.<br/>
    * <br/>
</span>--&gt;<br/>
&lt;!--<span class="xmlverb-comment"><br/>
        This stylesheet extracts OWL and RDFS ontologies from OMDoc documents.<br/>
</span>--&gt;<br/>
&lt;<span class="xmlverb-element-name"><a name="d22e3">stylesheet</a></span><span class="xmlverb-ns-name"> xmlns</span>="<span class="xmlverb-ns-uri">http://www.w3.org/1999/XSL/Transform</span>"<span class="xmlverb-ns-name"> xmlns:om</span>="<span class="xmlverb-ns-uri">http://www.openmath.org/OpenMath</span>"<span class="xmlverb-ns-name"> xmlns:krextor-genuri</span>="<span class="xmlverb-ns-uri">http://kwarc.info/projects/krextor/genuri</span>"<span class="xmlverb-ns-name"> xmlns:xs</span>="<span class="xmlverb-ns-uri">http://www.w3.org/2001/XMLSchema</span>"<span class="xmlverb-ns-name"> xmlns:odo</span>="<span class="xmlverb-ns-uri">http://www.omdoc.org/ontology#</span>"<span class="xmlverb-ns-name"> xmlns:omdoc</span>="<span class="xmlverb-ns-uri">http://omdoc.org/ns</span>"<span class="xmlverb-ns-name"> xmlns:krextor</span>="<span class="xmlverb-ns-uri">http://kwarc.info/projects/krextor</span>"<span class="xmlverb-ns-name"> xmlns:xd</span>="<span class="xmlverb-ns-uri">http://www.pnp-software.com/XSLTdoc</span>"<span class="xmlverb-ns-name"> xmlns:f</span>="<span class="xmlverb-ns-uri">http://fxsl.sf.net/</span>" <span class="xmlverb-attr-name">xpath-default-namespace</span>="<span class="xmlverb-attr-content">http://omdoc.org/ns</span>" <span class="xmlverb-attr-name">exclude-result-prefixes</span>="<span class="xmlverb-attr-content">#all</span>" <span class="xmlverb-attr-name">version</span>="<span class="xmlverb-attr-content">2.0</span>"&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e5">import</a></span> <span class="xmlverb-attr-name">href</span>="<span class="xmlverb-attr-content">util/omdoc.xsl</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e7">import</a></span> <span class="xmlverb-attr-name">href</span>="<span class="xmlverb-attr-content">util/rdfa.xsl</span>" /&gt;<span class="xmlverb-text"><br/>
<br/>
    </span><div class="xd">

    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e9">doc</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">stylesheet</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e11">short</a></span>&gt;<span class="xmlverb-text">Extracts </span>&lt;<span class="xmlverb-element-name"><a name="d22e13">a</a></span> <span class="xmlverb-attr-name">href</span>="<span class="xmlverb-attr-content">http://www.w3.org/2004/OWL/</span>"&gt;<span class="xmlverb-text">OWL</span>&lt;/<span class="xmlverb-element-name">a</span>&gt;<span class="xmlverb-text"> ontologies from </span>&lt;<span class="xmlverb-element-name"><a name="d22e16">a</a></span> <span class="xmlverb-attr-name">href</span>="<span class="xmlverb-attr-content">http://www.omdoc.org</span>"&gt;<span class="xmlverb-text">OMDoc</span>&lt;/<span class="xmlverb-element-name">a</span>&gt;<span class="xmlverb-text"> documents by giving them a special interpretation</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">short</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e20">author</a></span>&gt;<span class="xmlverb-text">Christoph Lange</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">author</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e23">copyright</a></span>&gt;<span class="xmlverb-text">Christoph Lange, 2008</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">copyright</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e26">svnId</a></span>&gt;<span class="xmlverb-text">$Id: omdoc-owl.xsl 593 2008-12-14 02:11:40Z clange $</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">svnId</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e30">strip-space</a></span> <span class="xmlverb-attr-name">elements</span>="<span class="xmlverb-attr-content">*</span>" /&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e32">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">debug</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">true()</span>" /&gt;<span class="xmlverb-text"><br/>
<br/>
    </span><div class="xd">

    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e35">doc</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">string*</span>"&gt;<span class="xmlverb-text">TODO</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e38">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">autogenerate-fragment-uris</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">()</span>" /&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e40">function</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:ontology-uri</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:string?</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e42">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">base-uri</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e44">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">name</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e46">sequence</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">concat($base-uri, $name)</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">function</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e49">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">krextor-genuri:ontology</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:string?</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e51">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">base-uri</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e53">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">node</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e55">sequence</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">krextor:ontology-uri($base-uri, $node/@name)</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e58">function</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:mmt-uri</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:string?</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e60">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">base-uri</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e62">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">name</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e64">sequence</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">concat($base-uri, '?', $name)</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">function</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e67">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">krextor-genuri:mmt</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:string?</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e69">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">base-uri</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e71">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">node</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e73">sequence</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">krextor:mmt-uri($base-uri, $node/@name)</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e77">template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-ontology-resource</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e79">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">mmt</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e81">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">()</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e83">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-resource</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e85">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">autogenerate-fragment-uri</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if ($mmt) then ('mmt') else ('ontology')</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e87">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">mmt</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$mmt</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e89">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$type</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span><div class="xd">

    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e93">doc</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">element*</span>"&gt;<span class="xmlverb-text">A sequence of mappings of CDs representing semantic web ontologies to their corresponding namespaces</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e96">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">ontology-namespaces</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;!--<span class="xmlverb-comment"> TODO collect odo:semWebBase of all imported theories (cf. exincl.xsl: $tree, make-catalogue) </span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;!--<span class="xmlverb-comment"> TODO do this on the ref-normal form of the document (cf. $all in exincl.xsl </span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e102">for-each</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">/descendant::theory</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> We collect the set of distinct symbols in this theory, not regarding nested theories </span>--&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e106">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">cdus</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">node()*</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-name"><a name="d22e108">for-each-group</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">descendant::om:OMS[ancestor::theory[1] is current() and not(ancestor::notation)]/@cd</span>" <span class="xmlverb-attr-name">group-by</span>="<span class="xmlverb-attr-content">.</span>"&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;<span class="xmlverb-element-name"><a name="d22e110">sequence</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">.</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-name">for-each-group</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-name">variable</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> we determine those symbols whose symbol definition is not in this document </span>--&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e116">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">todo</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$cdus[not(. = /descendant::theory/@xml:id)]</span>" /&gt;<span class="xmlverb-text"><br/>
<br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e118">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">catalogue</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;!--<span class="xmlverb-comment"> we search the import graph, starting with our theory. </span>--&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-name"><a name="d22e122">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:make-catalogue</span>"&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;<span class="xmlverb-element-name"><a name="d22e124">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">todo</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$todo</span>" /&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;<span class="xmlverb-element-name"><a name="d22e126">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">theory</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">.</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-name">variable</span>&gt;<span class="xmlverb-text"><br/>
<br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e131">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$catalogue</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:post-process-catalogue</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-name"><a name="d22e133">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">this-theory</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">@xml:id</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-name">apply-templates</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-name">for-each</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">variable</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e138">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">/</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:post-process-catalogue</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e140">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">this-theory</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">krextor</span>:<span class="xmlverb-element-name"><a name="d22e142">loc</a></span> <span class="xmlverb-attr-name">theory</span>="<span class="xmlverb-attr-content">{$this-theory}</span>" <span class="xmlverb-attr-name">omdoc</span>="<span class="xmlverb-attr-content">{concat('#', $this-theory)}</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e144">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">sem-web-base</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">krextor:sem-web-base[not(preceding-sibling::*)]</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e146">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$sem-web-base</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-name"><a name="d22e148">attribute</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">sem-web-base</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$sem-web-base</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">krextor</span>:<span class="xmlverb-element-name">loc</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e152">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">* except krextor:sem-web-base[not(preceding-sibling::*)]</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">#current</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e155">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">krextor:loc</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:post-process-catalogue</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e157">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">sem-web-base</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:string</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e159">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">sem-web-base</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">following-sibling::krextor:sem-web-base[@omdoc eq current()/@omdoc]</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e161">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if ($sem-web-base) then $sem-web-base else if (not(following-sibling::krextor:visited[. eq current()/@omdoc])) then krextor:sem-web-base(document(@omdoc)) else ''</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-name">variable</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e164">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$sem-web-base</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e166">copy</a></span>&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-name"><a name="d22e168">copy-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">@*</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-name"><a name="d22e170">attribute</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">sem-web-base</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$sem-web-base</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-name">copy</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e175">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">krextor:visited|krextor:sem-web-base</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:post-process-catalogue</span>" /&gt;<span class="xmlverb-text"><br/>
<br/>
    </span><div class="xd">

    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e178">doc</a></span>&gt;<span class="xmlverb-text">Recursively examine the locally imported theories and locate all theories that still need a catalogue entry.  Each theory is only visited once.  Returns a set of </span>&lt;<span class="xmlverb-element-name"><a name="d22e180">code</a></span>&gt;<span class="xmlverb-text">krextor:loc</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text"> elements.<br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e183">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">todo</span>"&gt;<span class="xmlverb-text">the theories that still need a catalogue entry</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">param</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e186">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">theory</span>"&gt;<span class="xmlverb-text">the theory that is searched for them</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">param</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e189">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">base-uri</span>"&gt;<span class="xmlverb-text">the base URI of the current theory, against which links to imported theories are resolved</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">param</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e192">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">visited</span>"&gt;<span class="xmlverb-text">a set of theories already visited</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">param</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e196">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">top-level-call</span>" <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">boolean</span>"&gt;<span class="xmlverb-text">indicates whether this is a top-level or a recursive call</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">param</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e200">template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:make-catalogue</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e202">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">todo</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">node()*</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e204">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">theory</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">node()*</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e206">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">base-uri</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e208">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">visited</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">node()*</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">()</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e210">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">top-level-call</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">true()</span>" /&gt;<span class="xmlverb-text"><br/>
        <br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e213">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">sem-web-base</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">krextor:sem-web-base($theory)</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e215">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$sem-web-base ne ''</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">krextor</span>:<span class="xmlverb-element-name"><a name="d22e217">sem-web-base</a></span> <span class="xmlverb-attr-name">omdoc</span>="<span class="xmlverb-attr-content">{concat(base-uri($theory), '#', $theory/@xml:id)}</span>"&gt;&lt;<span class="xmlverb-element-name"><a name="d22e218">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$sem-web-base</span>" /&gt;&lt;/<span class="xmlverb-element-nsprefix">krextor</span>:<span class="xmlverb-element-name">sem-web-base</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
<br/>
        </span>&lt;!--<span class="xmlverb-comment"> We build the local catalogue and put it in  a variable </span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e223">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">local-cat</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> search for imports in this theory.<br/>
            TODO Are we considering nested theories?  If so, we'd need to<br/>
            search their ancestors as well. </span>--&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e227">for-each</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$theory/imports</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">krextor</span>:<span class="xmlverb-element-name"><a name="d22e229">loc</a></span> <span class="xmlverb-attr-name">theory</span>="<span class="xmlverb-attr-content">{substring-after(@from, '#')}</span>" <span class="xmlverb-attr-name">omdoc</span>="<span class="xmlverb-attr-content">{resolve-uri(@from, $base-uri)}</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-name">for-each</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-name">variable</span>&gt;<span class="xmlverb-text"><br/>
<br/>
        </span>&lt;!--<span class="xmlverb-comment"> those theories that are in the local catalogue of the theory specified by the parameter $theory </span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e235">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">incat</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$todo[. = $local-cat/krextor:loc/@theory]</span>" /&gt;<span class="xmlverb-text"><br/>
<br/>
        </span>&lt;!--<span class="xmlverb-comment"> ... and those that aren't </span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e240">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">rest</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$todo except $incat</span>" /&gt;<span class="xmlverb-text"><br/>
<br/>
        </span>&lt;!--<span class="xmlverb-comment"> output loc elements for those theories that are imported from<br/>
        other documents and that were searched for (note, this <br/>
        differs from OMDoc's exincl.xsl) </span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e244">copy-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$local-cat/krextor:loc[@theory = $incat]</span>" /&gt;<span class="xmlverb-text"><br/>
<br/>
        </span>&lt;!--<span class="xmlverb-comment"> if there are remaining theories that are not in the local catalogue, recurse to them </span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e248">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$rest</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e250">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">follow</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$local-cat/krextor:loc[not(@omdoc = $visited)]/@omdoc</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> there is a catalogue of locally imported, still unvisited theories we can follow </span>--&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e254">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$follow</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-name"><a name="d22e256">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">result</span>"&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;<span class="xmlverb-element-name"><a name="d22e258">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:make-catalogue-iteration</span>"&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-name"><a name="d22e260">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">todo</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$rest</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-name"><a name="d22e262">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">head</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$follow[1]</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-name"><a name="d22e264">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">tail</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$follow[position() gt 1]</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-name"><a name="d22e266">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">base-uri</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$base-uri</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-name"><a name="d22e268">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">visited</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$visited</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-name"><a name="d22e271">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">top-level-call</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$top-level-call</span>" /&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;/<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-name">variable</span>&gt;<span class="xmlverb-text"><br/>
<br/>
                </span>&lt;<span class="xmlverb-element-name"><a name="d22e275">copy-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$result</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span><div class="xd">

    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e280">doc</a></span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e282">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">todo</span>"&gt;<span class="xmlverb-text">the theories that still need a catalogue entry</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">param</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e285">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">head</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e287">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">tail</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e289">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">base-uri</span>"&gt;<span class="xmlverb-text">the base URI of the current theory, against which links to imported theories are resolved</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">param</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e292">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">visited</span>"&gt;<span class="xmlverb-text">a set of theories already visited</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">param</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e296">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">top-level-call</span>" <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">boolean</span>"&gt;<span class="xmlverb-text">indicates whether this is a top-level or a recursive call</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">param</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e300">template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:make-catalogue-iteration</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e302">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">todo</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">node()*</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e304">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">head</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">node()*</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e306">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">tail</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">node()*</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e308">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">base-uri</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e310">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">visited</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">node()*</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e313">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">top-level-call</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:boolean</span>" /&gt;<span class="xmlverb-text"><br/>
<br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e315">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">new-base-uri</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">resolve-uri($head, $base-uri)</span>" /&gt;<span class="xmlverb-text"><br/>
<br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e317">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">recursive-call</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> this generates a set of loc's, followed by a list of visited's </span>--&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e321">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:make-catalogue</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-name"><a name="d22e323">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">todo</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$todo</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-name"><a name="d22e325">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">theory</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">document($head, .)</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-name"><a name="d22e327">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">base-uri</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$new-base-uri</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-name"><a name="d22e329">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">visited</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$visited</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-name"><a name="d22e331">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">top-level-call</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">false()</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">krextor</span>:<span class="xmlverb-element-name"><a name="d22e334">visited</a></span>&gt;&lt;<span class="xmlverb-element-name"><a name="d22e335">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$head</span>" /&gt;&lt;/<span class="xmlverb-element-nsprefix">krextor</span>:<span class="xmlverb-element-name">visited</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-name">variable</span>&gt;<span class="xmlverb-text"><br/>
<br/>
        </span>&lt;!--<span class="xmlverb-comment"> output the output generated by the recursive call<br/>
             (loc, visited, and sem-web-base) </span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e340">copy-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$recursive-call</span>" /&gt;<span class="xmlverb-text"><br/>
        <br/>
        </span>&lt;!--<span class="xmlverb-comment"> prepare next iteration: search still unvisited theories for imports still not found </span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e345">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">next-tail</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$tail[not(. = $recursive-call/krextor:visited)]</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e347">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">next-todo</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$todo[not(. = $recursive-call/krextor:loc/@theory)]</span>" /&gt;<span class="xmlverb-text"><br/>
<br/>
        </span>&lt;!--<span class="xmlverb-comment"> if there are imports to be found ... </span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e351">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$next-todo</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e353">choose</a></span>&gt;<span class="xmlverb-text"><br/>
                </span>&lt;!--<span class="xmlverb-comment"> ... and unvisited theories to search for them ... </span>--&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-name"><a name="d22e357">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$next-tail</span>"&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;<span class="xmlverb-element-name"><a name="d22e359">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:make-catalogue-iteration</span>"&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-name"><a name="d22e361">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">todo</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$next-todo</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-name"><a name="d22e363">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">head</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$next-tail[1]</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-name"><a name="d22e365">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">tail</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$next-tail[position() gt 1]</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-name"><a name="d22e367">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">visited</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$visited|$recursive-call/visited</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-name"><a name="d22e369">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">base-uri</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$base-uri</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-name"><a name="d22e372">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">top-level-call</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$top-level-call</span>" /&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;/<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-name"><a name="d22e376">otherwise</a></span>&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;<span class="xmlverb-element-name"><a name="d22e378">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$top-level-call</span>"&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-name"><a name="d22e380">message</a></span> <span class="xmlverb-attr-name">terminate</span>="<span class="xmlverb-attr-content">yes</span>"&gt;<span class="xmlverb-text">Cannot find locations for the theories </span>&lt;<span class="xmlverb-element-name"><a name="d22e382">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$next-todo</span>" <span class="xmlverb-attr-name">separator</span>="<span class="xmlverb-attr-content">,</span>" /&gt;<span class="xmlverb-text">!</span>&lt;/<span class="xmlverb-element-name">message</span>&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;/<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-name">otherwise</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span><div class="xd">

    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e390">doc</a></span>&gt;<span class="xmlverb-text">Overridden imported function from </span>&lt;<span class="xmlverb-element-name"><a name="d22e392">code</a></span>&gt;<span class="xmlverb-text">util/rdfa.xsl</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e395">function</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:default-curie-namespace</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e397">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">focus</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e399">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">krextor:default-namespace($focus)</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">function</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;!--<span class="xmlverb-comment"> regular templates matching OMDoc start here </span>--&gt;<span class="xmlverb-text"><br/>
    <br/>
    </span><div class="xd">

    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e405">doc</a></span>&gt;<span class="xmlverb-text">Create a resource from an OMDoc symbol</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e408">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">symbol</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e410">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-ontology-resource</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span><div class="xd">

    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e413">doc</a></span>&gt;<span class="xmlverb-text">Make this resource an instance of some class</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e416">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">symbol/type[@system='owl']/om:OMOBJ</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e418">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">om:*[1]</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e420">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.w3.org/1999/02/22-rdf-syntax-ns#type'</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-name">apply-templates</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span><div class="xd">

    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e424">doc</a></span>&gt;<span class="xmlverb-text">Returns the semantic web URI of a given symbol<br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e426">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">sym</span>"&gt;<span class="xmlverb-text">a symbol that is expected to have </span>&lt;<span class="xmlverb-element-name"><a name="d22e428">code</a></span>&gt;<span class="xmlverb-text">@cd</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text"> and </span>&lt;<span class="xmlverb-element-name"><a name="d22e431">code</a></span>&gt;<span class="xmlverb-text">@name</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text"> attributes (as in OpenMath)</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">param</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e436">function</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:ontology-uri</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e438">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">sym</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e440">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">sem-web-base</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$ontology-namespaces/krextor:loc[@theory eq $sym/@cd]/@sem-web-base</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e442">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if ($sem-web-base) then krextor:ontology-uri($sem-web-base, $sym/@name) else krextor:mmt-uri('MMT-FIXME', concat($sym/@cd, '?', $sym/@name))</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">function</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e446">function</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:ontology-uri-or-blank</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e448">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">sym</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e450">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if ($sym/self::om:OMS) then krextor:ontology-uri($sym) else ()</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">function</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span><div class="xd">

    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e453">doc</a></span>&gt;<span class="xmlverb-text">Creates an RDF triple for a single OWL axiom given as a predicate(subject, object) triple</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e456">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">axiom/FMP[@logic eq 'owl']/om:OMOBJ/om:OMA[count(om:*) eq 3]</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e458">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">predicate-object-rewritten</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">krextor</span>:<span class="xmlverb-element-name"><a name="d22e460">dummy</a></span>&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">om</span>:<span class="xmlverb-element-name"><a name="d22e462">OMA</a></span>&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;<span class="xmlverb-element-name"><a name="d22e464">copy-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">om:*[1]</span>" /&gt;&lt;!--<span class="xmlverb-comment"> predicate </span>--&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;<span class="xmlverb-element-name"><a name="d22e467">copy-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">om:*[3]</span>" /&gt;&lt;!--<span class="xmlverb-comment"> object </span>--&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">om</span>:<span class="xmlverb-element-name">OMA</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-nsprefix">krextor</span>:<span class="xmlverb-element-name">dummy</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-name">variable</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e473">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-resource</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> TODO automate this by overriding create-resource </span>--&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e477">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">subject</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">krextor:ontology-uri-or-blank(om:*[2])</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e479">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">process-next</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">om:*[2][not(self::om:OMS)] |$predicate-object-rewritten/*</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e483">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">krextor:dummy/om:OMA[count(om:*) eq 2][om:*[1][self::om:OMS]]</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e485">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-resource</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e487">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">krextor:ontology-uri(om:*[1])</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e489">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">subject</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">krextor:ontology-uri-or-blank(om:*[2])</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e491">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">process-next</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">om:*[2][not(self::om:OMS)]</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e495">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">definition[@type eq 'simple']</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e497">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">symbol</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">document(@for)</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e499">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$symbol</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e501">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">symbol-oms</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">om</span>:<span class="xmlverb-element-name"><a name="d22e503">OMS</a></span> <span class="xmlverb-attr-name">cd</span>="<span class="xmlverb-attr-content">{parent::theory/@name}</span>" <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">$symbol/@name</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-name">variable</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e506">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-resource</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-name"><a name="d22e508">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">subject</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">krextor:ontology-uri($symbol)</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e513">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">om:OMOBJ[parent::definition[@type eq 'simple']]</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e515">choose</a></span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e517">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">om:*[1][self::om:OMS]</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-name"><a name="d22e519">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-resource</span>"&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;<span class="xmlverb-element-name"><a name="d22e521">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.w3.org/2002/07/owl#equivalentClass'</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;<span class="xmlverb-element-name"><a name="d22e523">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">subject</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">krextor:ontology-uri(om:*[1])</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e527">otherwise</a></span>&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-name"><a name="d22e529">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-resource</span>"&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;<span class="xmlverb-element-name"><a name="d22e531">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">blank-node</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">true()</span>" /&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;<span class="xmlverb-element-name"><a name="d22e533">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">process-next</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">om:*[1]</span>" /&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;<span class="xmlverb-element-name"><a name="d22e535">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.w3.org/2002/07/owl#equivalentClass'</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-name">otherwise</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e542">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">om:OMA[om:*[1][self::om:OMS[@cd eq 'owl' and @name eq 'intersectionOf']]]</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e544">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-resource</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e546">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.w3.org/2002/07/owl#intersectionOf'</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e548">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">collection</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">true()</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e550">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">process-next</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">om:*[position() ge 2]</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e554">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">om:OMA[count(om:*) eq 3][om:*[1][self::om:OMS[@cd eq 'owl' and @name eq 'Restriction']]][om:*[2][self::om:OMS]]</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e556">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-resource</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e558">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.w3.org/2002/07/owl#Restriction'</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e560">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">properties</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">krextor</span>:<span class="xmlverb-element-name"><a name="d22e562">property</a></span> <span class="xmlverb-attr-name">uri</span>="<span class="xmlverb-attr-content">http://www.w3.org/2002/07/owl#onProperty</span>" <span class="xmlverb-attr-name">object</span>="<span class="xmlverb-attr-content">{krextor:ontology-uri(om:*[2])}</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-name">with-param</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e565">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">blank-node</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">true()</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e567">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">process-next</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">om:*[3]</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e571">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">om:OMA[om:*[1][self::om:OMS[@cd eq 'owl' and @name = ('minCardinality', 'maxCardinality', 'cardinality')]]][om:*[2][self::om:OMI]]</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e573">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-literal-property</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e575">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">krextor:ontology-uri(om:*[1])</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e577">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">object</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">om:*[2]/text()</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e579">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">object-datatype</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.w3.org/2001/XMLSchema#nonNegativeInteger'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e583">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">om:OMS</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e585">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-resource</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e587">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">subject</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">krextor:ontology-uri(.)</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span><div class="xd">

    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e591">doc</a></span>&gt;<span class="xmlverb-text">Try to find the ontology namespace (calls </span>&lt;<span class="xmlverb-element-name"><a name="d22e593">code</a></span>&gt;<span class="xmlverb-text">krextor:sem-web-base</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text">)</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e597">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">theory</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e599">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">sem-web-base</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$ontology-namespaces/krextor:loc[@theory eq current()/@xml:id]/@sem-web-base</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e601">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.w3.org/2002/07/owl#Ontology'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e603">choose</a></span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e605">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">exists($sem-web-base)</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-name"><a name="d22e607">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-ontology-resource</span>"&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;<span class="xmlverb-element-name"><a name="d22e609">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">base-uri</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$sem-web-base</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;<span class="xmlverb-element-name"><a name="d22e611">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$type</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e615">otherwise</a></span>&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-name"><a name="d22e617">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-ontology-resource</span>"&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;<span class="xmlverb-element-name"><a name="d22e619">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">mmt</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">true()</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;<span class="xmlverb-element-name"><a name="d22e621">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$type</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-name">otherwise</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span><div class="xd">

    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e628">doc</a></span>&gt;<span class="xmlverb-text">Try to find the ontology namespace of a given theory (special<br/>
        metadata field </span>&lt;<span class="xmlverb-element-name"><a name="d22e630">code</a></span>&gt;<span class="xmlverb-text">odo:semWebBase</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text">)<br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e633">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">theory</span>" <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">node</span>"&gt;<span class="xmlverb-text">the theory</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">param</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e637">function</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:sem-web-base</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:string</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e639">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">theory</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e641">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">link</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">node()*</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-name"><a name="d22e643">sequence</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$theory/metadata/link[krextor:curie-to-uri($theory, @rel) eq 'http://www.omdoc.org/ontology#semWebBase']</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-name">variable</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-name"><a name="d22e646">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if ($link) then $link/@href else ''</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-name">function</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span><div class="xd">

    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e649">doc</a></span>&gt;<span class="xmlverb-text">We don't extract top-level metadata, as they do not correspond to<br/>
        anything in an ontology.</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e652">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">/omdoc/metadata</span>" /&gt;<span class="xmlverb-text"><br/>
<br/>
    </span><div class="xd">

    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d22e654">doc</a></span>&gt;<span class="xmlverb-text">We don't extract the special annotation of the ontology namespace<br/>
        of a theory, as it is for internal use.</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-name"><a name="d22e657">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">link[krextor:curie-to-uri(., @rel) eq 'http://www.omdoc.org/ontology#semWebBase']</span>" /&gt;<span class="xmlverb-text"><br/>
</span>&lt;/<span class="xmlverb-element-name">stylesheet</span>&gt;<br/>
</div>
</tt><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>v
         </body></html>
