
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><title>XML source view</title><link rel="stylesheet" type="text/css" href="../xmlverbatim.css"/></head><body class="xmlverb-default"><tt>
<!-- converted by xmlverbatim.xsl 1.1, (c) O. Becker -->
<div xmlns:xd="http://www.pnp-software.com/XSLTdoc" class="xmlverb-default">&lt;!--<span class="xmlverb-comment"><br/>
    *  Copyright (C) 2008<br/>
    *  Christoph Lange<br/>
    *  Gordan Ristovski<br/>
    *  Andrei Ioni&#355;&#259;<br/>
    *  Jacobs University Bremen<br/>
    *<br/>
    *   Krextor is free software; you can redistribute it and/or<br/>
    *         modify it under the terms of the GNU Lesser General Public<br/>
    *         License as published by the Free Software Foundation; either<br/>
    *         version 2 of the License, or (at your option) any later version.<br/>
    *<br/>
    *         This program is distributed in the hope that it will be useful,<br/>
    *         but WITHOUT ANY WARRANTY; without even the implied warranty of<br/>
    *         MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU<br/>
    *         Lesser General Public License for more details.<br/>
    *<br/>
    *         You should have received a copy of the GNU Lesser General Public<br/>
    *         License along with this library; if not, write to the<br/>
    *         Free Software Foundation, Inc., 59 Temple Place - Suite 330,<br/>
    *         Boston, MA 02111-1307, USA.<br/>
    * <br/>
</span>--&gt;<br/>
&lt;!--<span class="xmlverb-comment"><br/>
        This stylesheet extracts RDF from OMDoc documents.<br/>
<br/>
        See https://svn.omdoc.org/repos/omdoc/trunk/owl for the corresponding ontology.<br/>
</span>--&gt;<br/>
&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e3">stylesheet</a></span><span class="xmlverb-ns-name"> xmlns:xsl</span>="<span class="xmlverb-ns-uri">http://www.w3.org/1999/XSL/Transform</span>"<span class="xmlverb-ns-name"> xmlns:om</span>="<span class="xmlverb-ns-uri">http://www.openmath.org/OpenMath</span>"<span class="xmlverb-ns-name"> xmlns:omdoc</span>="<span class="xmlverb-ns-uri">http://omdoc.org/ns</span>"<span class="xmlverb-ns-name"> xmlns:krextor</span>="<span class="xmlverb-ns-uri">http://kwarc.info/projects/krextor</span>" <span class="xmlverb-attr-name">xpath-default-namespace</span>="<span class="xmlverb-attr-content">http://omdoc.org/ns</span>" <span class="xmlverb-attr-name">exclude-result-prefixes</span>="<span class="xmlverb-attr-content">omdoc om krextor</span>" <span class="xmlverb-attr-name">version</span>="<span class="xmlverb-attr-content">2.0</span>"&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;!--<span class="xmlverb-comment"> TODO think about a two-pass processing of resources that can have both<br/>
         document-wise physical children and mathematical/rhetorical logical children </span>--&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;!--<span class="xmlverb-comment"> Specifies whether MMT-style URLs (OMDoc 1.3) should be generated </span>--&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e9">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">mmt</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">false()</span>" /&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;!--<span class="xmlverb-comment"> Intercept auto-generation of fragment URIs from xml:ids, as this <br/>
         should not always be done for OMDoc </span>--&gt;<span class="xmlverb-text"><br/>
    </span>&lt;!--<span class="xmlverb-comment"> TODO think about having ('mmt', 'xml-id' ...), i.e. a configuration in<br/>
         the same way as for generic.xsl, with custom handlers for values like<br/>
         'mmt', which generic-templates does not know </span>--&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e16">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">autogenerate-fragment-uris</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">()</span>" /&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;!--<span class="xmlverb-comment"> Default setting if we want fragment URIs to be auto-generated </span>--&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e20">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">autogenerate-fragment-uris-omdoc-default</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">( 'xml-id', 'document-root-base')</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;!--<span class="xmlverb-comment"> Other settings for testing </span>--&gt;<span class="xmlverb-text"><br/>
    </span>&lt;!--<span class="xmlverb-comment"><br/>
    &lt;xsl:param name="autogenerate-fragment-uris-omdoc-default" select="(<br/>
        'pseudo-xpath'<br/>
        )"/&gt;<br/>
    </span>--&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e26">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">use-root-xmlid</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">false()</span>" /&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e29">include</a></span> <span class="xmlverb-attr-name">href</span>="<span class="xmlverb-attr-content">util/openmath.xsl</span>" /&gt;<span class="xmlverb-text"><br/>
        <br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e31">template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-omdoc-resource</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e33">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e35">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">()</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e37">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-inverse-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">()</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e39">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">formality-degree</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e41">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">subject-uri</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;!--<span class="xmlverb-comment"> the URI of the current document section resource </span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e46">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">document-base</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;!--<span class="xmlverb-comment"> the URI of the current mathematical or rhetorical structure </span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e50">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">knowledge-base</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;!--<span class="xmlverb-comment"> a list of values from ('document', 'knowledge'), specifying<br/>
             whether a document section or a mathematical/rhetorical structure<br/>
             resource should be generated from this element </span>--&gt;<span class="xmlverb-text"><br/>
             </span>&lt;!--<span class="xmlverb-comment"> &lt;xsl:param name="ontologies" required="yes"/&gt; </span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e56">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">ontologies</span>" <span class="xmlverb-attr-name">required</span>="<span class="xmlverb-attr-content">no</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e59">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">mmt</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$mmt and @name</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e61">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">use-document-uri</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">not($use-root-xmlid) and self::node() = /</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e63">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">process-next</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">*|@*</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e65">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">blank-node</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">false()</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;!--<span class="xmlverb-comment"> Check if we can generate a URI for the current element </span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e69">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$mmt or $use-document-uri or @xml:id</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e71">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-resource</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;!--<span class="xmlverb-comment"> If we are not on top level, manipulate the base URI,<br/>
                     either in MMT or in OMDoc 1.2 style </span>--&gt;<span class="xmlverb-text"><br/>
                </span>&lt;!--<span class="xmlverb-comment"> FIXME look into omdoc-owl.xsl for a better way of how to do this </span>--&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e77">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">subject-uri</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if ($mmt and @name) then concat($subject-uri, '/', @name) else $subject-uri</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e79">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">autogenerate-fragment-uri</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if (not($mmt) and not($use-document-uri)) then $autogenerate-fragment-uris-omdoc-default else ()</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e81">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">properties</span>"&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e83">if</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$formality-degree</span>"&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">krextor</span>:<span class="xmlverb-element-name"><a name="d29e85">property</a></span> <span class="xmlverb-attr-name">uri</span>="<span class="xmlverb-attr-content">http://www.omdoc.org/ontology#formalityDegree</span>" <span class="xmlverb-attr-name">object</span>="<span class="xmlverb-attr-content">{$formality-degree}</span>" /&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">with-param</span>&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e90">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$type</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e92">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">blank-node</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$blank-node</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e94">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$related-via-properties</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e96">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-inverse-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$related-via-inverse-properties</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e98">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">process-next</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$process-next</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;!--<span class="xmlverb-comment"> Transforms e.g. false-conjecture -&gt; FalseConjecture </span>--&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e105">function</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">omdoc:capitalize-type</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e107">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e109">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">capitalized-tokens</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e111">for-each</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">tokenize($type, '-')</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e113">analyze-string</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">.</span>" <span class="xmlverb-attr-name">regex</span>="<span class="xmlverb-attr-content">^(.)</span>"&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e115">matching-substring</a></span>&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e117">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">upper-case(regex-group(1))</span>" /&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">matching-substring</span>&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e120">non-matching-substring</a></span>&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e122">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">.</span>" /&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">non-matching-substring</span>&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">analyze-string</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">for-each</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">variable</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e128">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">string-join($capitalized-tokens, '')</span>" /&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">function</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;!--<span class="xmlverb-comment"> TODO: There can also be @for for the rhetorical types but it's not yet completely clear where<br/>
                the @for should point to and how to model it in the ontology. </span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e133">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">salt-rhetorical-block-types</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'introduction', 'background', 'motivation', 'scenario', 'contribution', 'evaluation', 'results', 'discussion', 'conclusion'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e136">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">salt-rhetorical-block-types-all</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$salt-rhetorical-block-types, 'abstract', 'entities'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e138">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">salt-rhetorical-relation-types</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'antithesis', 'circumstance', 'concession', 'condition', 'evidence', 'means', 'preparation', 'purpose', 'cause', 'consequence', 'elaboration', 'restatement', 'solutionhood'</span>" /&gt;<span class="xmlverb-text"><br/>
<br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e140">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">omdoc-assertion-types</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'theorem', 'lemma', 'corollary', 'proposition', 'conjecture', 'false-conjecture', 'obligation', 'postulate', 'formula', 'assumption', 'rule'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e142">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">omdoc-statement-types</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$omdoc-assertion-types, 'axiom', 'definition', 'example', 'proof', 'assertion', 'rule', 'hypothesis' (: TODO: notation :)</span>" /&gt;<span class="xmlverb-text"><br/>
        <br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e144">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">omdoc:*/@theory</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e146">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e148">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#theoryOf'</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
        <br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e152">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">omdoc</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e154">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-omdoc-resource</span>"&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e156">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#Document'</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e158">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">ontologies</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'document'</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
        <br/>
        </span>&lt;!--<span class="xmlverb-comment">Do we actually need a separate class for tgroup?</span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e165">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">omgroup|tgroup</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e167">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-omdoc-resource</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;!--<span class="xmlverb-comment"> FIXME documentUnit, rhetoricalBlock? </span>--&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e171">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if (@type = $salt-rhetorical-block-types-all) then concat('http://salt.semanticauthoring.org/onto/rhetorical-ontology#', omdoc:capitalize-type(@type)) else 'http://www.omdoc.org/ontology#DocumentUnit'</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e173">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if (self::tgroup and parent::theory) then 'http://www.omdoc.org/ontology#homeTheoryOf' else '' , if(parent::omdoc) then 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasComposite' else 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasPart'</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
        <br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e177">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">ref</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e179">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-omdoc-resource</span>"&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;!--<span class="xmlverb-comment"> FIXME documentUnit </span>--&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e183">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#Reference'</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e185">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#hasPart'</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
        <br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e189">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">ref/@xref</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e191">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e193">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#hasReference'</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
                <br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e197">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">metadata/*</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e199">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-literal-property</span>"&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e201">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">concat(namespace-uri(), local-name())</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
        <br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e205">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">theory</span>"&gt;<span class="xmlverb-text">        <br/>
                    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e207">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-omdoc-resource</span>"&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;!--<span class="xmlverb-comment"> FIXME documentUnit, mathematicalBlock </span>--&gt;<span class="xmlverb-text"><br/>
                            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e211">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if (parent::theory) then 'http://www.omdoc.org/ontology#homeTheoryOf' else 'http://www.omdoc.org/ontology#hasPart' , if (parent::omdoc) then 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasComposite' else 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasPart'</span>" /&gt;<span class="xmlverb-text"><br/>
                           </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e213">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#Theory'</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;!--<span class="xmlverb-comment"> TODO make this the home theory of any statement-level child<br/>
        and any subtheory, which is not in an XIncluded or ref-included document<br/>
        Probably use a separate mode for that, to be able to match e.g.<br/>
        match="definition" mode="child" and generate containsDefinition from that,<br/>
        instead of a generic contains relationship. </span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e219">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">theory/@meta</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e221">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e223">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#metaTheory'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;!--<span class="xmlverb-comment"> A plain OMDoc 1.2 import without morphism </span>--&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e230">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">imports[not(*)]</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e232">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e234">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#imports'</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e236">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">object</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">@from</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;!--<span class="xmlverb-comment"> An MMT (OMDoc 1.3) import </span>--&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e242">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">import</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e244">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-omdoc-resource</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> FIXME mathematicalBlock. Is it a document unit? </span>--&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e248">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#Import'</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e250">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if (parent::theory) then 'http://www.omdoc.org/ontology#homeTheoryOf' else 'http://www.omdoc.org/ontology#hasImport' , if (parent::tgroup) then 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasComposite' else 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasPart'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text">    <br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e254">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">imports/@from</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e256">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e258">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#imports'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
        <br/>
        <br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e262">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">omtext/@verbalizes</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e264">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e266">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">list</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">true()</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e268">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#verbalizes'</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
        <br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e272">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">FMP/@logic</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e274">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-literal-property</span>"&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e276">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#logic'</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
        <br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e281">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">CMP/@xml:lang</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e283">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-literal-property</span>"&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e285">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://purl.org/dc/elements/1.1/language'</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e289">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">om:OMOBJ//om:OMS</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e291">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e293">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#usesSymbol'</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;!--<span class="xmlverb-comment"> use the innermost cdbase attribute. At least the OMOBJ must have a cdbase attribute,<br/>
                                or otherwise the default is assumed </span>--&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e297">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">object</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">om:symbol-uri((ancestor-or-self::om:*/@cdbase)[last()], @cd, @name)</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;!--<span class="xmlverb-comment"> TODO: MMT imports: add Theory-hasImport-Import-importsFrom-Theory </span>--&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;!--<span class="xmlverb-comment"> TODO adapt to further progress of the MMT (OMDoc 1.3) specification </span>--&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e305">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">symbol[not(@role)]</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e307">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-omdoc-resource</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> FIXME mathematicalBlock. Is it a document unit? </span>--&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e311">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if (parent::proof) then 'http://www.omdoc.org/ontology#hasStep' else if (parent::theory) then 'http://www.omdoc.org/ontology#homeTheoryOf' else 'http://www.omdoc.org/ontology#hasPart' , if (parent::tgroup) then 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasComposite' else 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasPart'</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e313">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#Symbol'</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e315">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">formality-degree</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#Formal'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;!--<span class="xmlverb-comment"> TODO adapt to further progress of the MMT (OMDoc 1.3) specification </span>--&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e322">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">symbol[@role='axiom']|axiom</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e324">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-omdoc-resource</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> FIXME documentUnit, mathematicalBlock (can contain CMPs) </span>--&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e328">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if (parent::proof) then 'http://www.omdoc.org/ontology#hasStep' else if (parent::theory) then 'http://www.omdoc.org/ontology#homeTheoryOf' else 'http://www.omdoc.org/ontology#hasPart' , if (parent::tgroup) then 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasComposite' else 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasPart'</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e330">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#Axiom'</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e332">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">formality-degree</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#Formal'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e336">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">definition[@name or @xml:id]</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e338">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-omdoc-resource</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> FIXME documentUnit, mathematicalBlock </span>--&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e342">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if (parent::proof) then 'http://www.omdoc.org/ontology#hasStep' else if (parent::theory) then 'http://www.omdoc.org/ontology#homeTheoryOf' else 'http://www.omdoc.org/ontology#hasPart' , if (parent::tgroup) then 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasComposite' else 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasPart'</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e344">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#Definition'</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e346">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">formality-degree</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#Formal'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e350">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">definition/@for|omtext[@type='definition']/@for</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e352">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e354">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#defines'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
        <br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e358">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">example/@for|omtext[@type='example']/@for</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e360">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e362">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#exemplifies'</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
        <br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e366">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">alternative</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e368">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-omdoc-resource</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> FIXME documentUnit, mathematicalBlock </span>--&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e372">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if (parent::theory) then 'http://www.omdoc.org/ontology#homeTheoryOf' else 'http://www.omdoc.org/ontology#hasPart' , if (parent::omdoc) then 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasComposite' else 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasPart'</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e374">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#AlternativeDefinition'</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e376">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">formality-degree</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#Formal'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e380">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">type[not(parent::symbol)]</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e382">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-omdoc-resource</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> FIXME documentUnit, mathematicalBlock </span>--&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e386">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if (parent::theory) then 'http://www.omdoc.org/ontology#homeTheoryOf' else 'http://www.omdoc.org/ontology#hasPart' , if (parent::omdoc) then 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasComposite' else 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasPart'</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e388">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#TypeAssertion'</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e390">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">formality-degree</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#Formal'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e395">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">assertion</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e397">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-omdoc-resource</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> FIXME documentUnit, mathematicalBlock </span>--&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e401">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if (parent::theory) then 'http://www.omdoc.org/ontology#homeTheoryOf' else 'http://www.omdoc.org/ontology#hasPart' , if (parent::omdoc) then 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasComposite' else 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasPart'</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e403">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">concat('http://www.omdoc.org/ontology#', if (@type = $omdoc-assertion-types) then omdoc:capitalize-type(@type) else 'Assertion')</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e405">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">formality-degree</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#Formal'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e409">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">example</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e411">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-omdoc-resource</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> FIXME documentUnit, mathematicalBlock </span>--&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e415">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if (parent::theory) then 'http://www.omdoc.org/ontology#homeTheoryOf' else 'http://www.omdoc.org/ontology#hasPart' , if (parent::omdoc) then 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasComposite' else 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasPart'</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e417">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#Example'</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e419">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">formality-degree</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#Formal'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e423">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">proof</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e425">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-omdoc-resource</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> FIXME documentUnit, mathematicalBlock </span>--&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e429">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if (parent::method[parent::derive]) then 'http://www.omdoc.org/ontology#justifiedBy' else if (parent::theory) then 'http://www.omdoc.org/ontology#homeTheoryOf' else 'http://www.omdoc.org/ontology#hasPart' , if (parent::omdoc) then 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasComposite' else 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasPart'</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e431">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#Proof'</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e433">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">formality-degree</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#Formal'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
        <br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e437">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">proofobject</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e439">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-omdoc-resource</span>"&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e441">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if (parent::method[parent::derive]) then 'http://www.omdoc.org/ontology#justifiedBy' else if (parent::theory) then 'http://www.omdoc.org/ontology#homeTheoryOf' else 'http://www.omdoc.org/ontology#hasPart' , if (parent::omdoc) then 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasComposite' else 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasPart'</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e443">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#Proof'</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e445">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">formality-degree</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#Computerized'</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
    <br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e449">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">proof/@for|omtext[@type='proof']/@for</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e451">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
                   </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e453">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#proves'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
        <br/>
    </span>&lt;!--<span class="xmlverb-comment">TODO omtext/@type='assumption' may have the inductive attribute</span>--&gt;<span class="xmlverb-text"><br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e460">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">omtext</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e462">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">has-mathematical-type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">@type = $omdoc-statement-types</span>" /&gt;<span class="xmlverb-text">"<br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e464">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-omdoc-resource</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> FIXME documentUnit, (mathematicalBlock|rhetoricalBlock)?<br/>
            maybe split into multiple templates </span>--&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e468">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if (parent::theory and $has-mathematical-type) then 'http://www.omdoc.org/ontology#homeTheoryOf' else if (parent::proof) then 'http://www.omdoc.org/ontology#hasStep' else 'http://www.omdoc.org/ontology#hasPart' , if (parent::omdoc) then 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasComposite' else 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasPart'</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e470">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if ($has-mathematical-type) then concat('http://www.omdoc.org/ontology#', omdoc:capitalize-type(@type)) else if (@type = $salt-rhetorical-block-types) then concat('http://salt.semanticauthoring.org/onto/rhetorical-ontology#', omdoc:capitalize-type(@type)) else if (@type eq 'derive') then 'http://www.omdoc.org/ontology#DerivationStep' else if (parent::proof) then 'http://www.omdoc.org/ontology#ProofText' else 'http://www.omdoc.org/ontology#Statement'</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e472">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">formality-degree</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#Informal'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e476">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">CMP|FMP</span>"&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e478">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-omdoc-resource</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> FIXME documentUnit, mathematicalBlock </span>--&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e482">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#hasProperty' , 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasInformationChunk'</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e484">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#Property'</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e486">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">formality-degree</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if (self::CMP) then 'http://www.omdoc.org/ontology#Informal' else 'http://www.omdoc.org/ontology#Formal'</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
        <br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e490">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">FMP/assumption|omtext[@type='assumption']/@for</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e492">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-omdoc-resource</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> FIXME mathematicalBlock </span>--&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e496">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#assumes'</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e498">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#AssumptionElement'</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
        <br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e502">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">FMP/conclusion</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e504">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-omdoc-resource</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> FIXME mathematicalBlock </span>--&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e508">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#concludes'</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e510">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#ConclusionElement'</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
        <br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e514">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">CMP//term[@role='definiendum']</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e516">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e518">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#defines'</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e520">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">object</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">om:symbol-uri((ancestor-or-self::om:*/@cdbase)[last()], @cd, @name)</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
        <br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e524">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">CMP//term[@role='definiens']</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e526">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e528">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#usesSymbol'</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e530">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">object</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">om:symbol-uri((ancestor-or-self::om:*/@cdbase)[last()], @cd, @name)</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
        <br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e535">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">phrase[@type eq 'nucleus']</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;!--<span class="xmlverb-comment"> Here, we just create the resource.<br/>
                 As it can be used in multiple rhetorical relations, we do that in a second pass </span>--&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e539">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-omdoc-resource</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;!--<span class="xmlverb-comment"> FIXME rhetoricalBlock.  No documentUnit, as below InformationChunk level </span>--&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e543">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://salt.semanticauthoring.org/onto/rhetorical-ontology#Nucleus'</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
        <br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e547">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">phrase[@type eq 'nucleus']</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">second-pass</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e549">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">_omdoc-second-pass</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e551">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-omdoc-resource</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;!--<span class="xmlverb-comment"> Here, we do not actually create the resource but abuse that<br/>
                     template to create an additional link from the rhetorical relation<br/>
                     to it. </span>--&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e555">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#hasNucleus'</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e559">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">phrase[@type eq 'satellite']</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">second-pass</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e561">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-omdoc-resource</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;!--<span class="xmlverb-comment"> FIXME rhetoricalBlock.  No documentUnit, as below InformationChunk level </span>--&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e565">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#hasSatellite'</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e567">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://salt.semanticauthoring.org/onto/rhetorical-ontology#Satellite'</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e571">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">phrase[@type eq 'satellite']/@for</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">second-pass</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e573">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">document(.)</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">second-pass</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
        </span>&lt;!--<span class="xmlverb-comment"> We start processing phrases and rhetorical relations here </span>--&gt;<span class="xmlverb-text"><br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e578">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">phrase[@type eq 'satellite']</span>"&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e580">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">_omdoc-second-pass</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
            </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e582">choose</a></span>&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e584">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$_omdoc-second-pass</span>"&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e586">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">.|@for</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">second-pass</span>"&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e588">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">_omdoc-second-pass</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">false()</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">apply-templates</span>&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e592">otherwise</a></span>&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e594">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-omdoc-resource</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;!--<span class="xmlverb-comment"> FIXME rhetoricalBlock.  No documentUnit, as below InformationChunk level </span>--&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e598">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-inverse-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://salt.semanticauthoring.org/onto/rhetorical-ontology#partOfRhetoricalStructure'</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e600">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">concat('http://salt.semanticauthoring.org/onto/rhetorical-ontology#', if (@relation = $salt-rhetorical-relation-types) then omdoc:capitalize-type(@relation) else 'RhetoricalRelation')</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e602">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">blank-node</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">true()</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e604">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">process-next</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">.</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e607">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">_omdoc-second-pass</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">true()</span>" <span class="xmlverb-attr-name">tunnel</span>="<span class="xmlverb-attr-content">yes</span>" /&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">otherwise</span>&gt;<span class="xmlverb-text"><br/>
            </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
<br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e614">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">derive/method/premise</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;!--<span class="xmlverb-comment"> TODO @rank </span>--&gt;<span class="xmlverb-text"><br/>
                </span>&lt;!--<span class="xmlverb-comment"> enforce the following template to be called </span>--&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e620">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">@xref</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">#current</span>" /&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
        <br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e623">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">derive/method/premise/@xref</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e625">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:add-uri-property</span>"&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e627">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">property</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#justifiedBy'</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;!--<span class="xmlverb-comment">&lt;xsl:with-param name="formality-degree" select="'&amp;odo;Informal'"/&gt;</span>--&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
        <br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e633">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">derive[@type='conclusion']</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e635">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-omdoc-resource</span>"&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;!--<span class="xmlverb-comment"> FIXME documentUnit, mathematicalBlock </span>--&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e639">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#hasStep' , 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasPart'</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e641">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#DerivedConclusion'</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e643">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">formality-degree</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#Formal'</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
        <br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e647">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">derive[@type='gap']</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e649">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-omdoc-resource</span>"&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;!--<span class="xmlverb-comment"> FIXME documentUnit, mathematicalBlock </span>--&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e653">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#hasStep' , 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasPart'</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e655">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#Gap'</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e657">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">formality-degree</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#Formal'</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
        <br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e661">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">derive[not(@type='conclusion') and not(@type='gap')]</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e663">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-omdoc-resource</span>"&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;!--<span class="xmlverb-comment"> FIXME documentUnit, mathematicalBlock </span>--&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e667">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#hasStep' , 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasPart'</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e669">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#DerivationStep'</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e671">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">formality-degree</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#Formal'</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"> <br/>
        <br/>
        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e675">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">hypothesis</span>"&gt;<span class="xmlverb-text"><br/>
                </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e677">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:create-omdoc-resource</span>"&gt;<span class="xmlverb-text"><br/>
                    </span>&lt;!--<span class="xmlverb-comment"> FIXME documentUnit, mathematicalBlock </span>--&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e681">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">related-via-properties</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#hasStep' , 'http://salt.semanticauthoring.org/onto/abstract-document-ontology#hasPart'</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e683">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">type</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#Hypothesis'</span>" /&gt;<span class="xmlverb-text"><br/>
                        </span>&lt;<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name"><a name="d29e685">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">formality-degree</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'http://www.omdoc.org/ontology#Formal'</span>" /&gt;<span class="xmlverb-text"><br/>
                </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br/>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br/>
        <br/>
</span>&lt;/<span class="xmlverb-element-nsprefix">xsl</span>:<span class="xmlverb-element-name">stylesheet</span>&gt;<br/>
</div>
</tt><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>v
         </body></html>
