<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><title>XML source view</title><link rel="stylesheet" type="text/css" href="../xmlverbatim.css"></link></head><body class="xmlverb-default"><tt>
<!-- converted by xmlverbatim.xsl 1.1, (c) O. Becker -->
<div xmlns:xd="http://www.pnp-software.com/XSLTdoc" class="xmlverb-default">&lt;!--<span class="xmlverb-comment"><br></br>
    *  Copyright (C) 2008<br></br>
    *  Christoph Lange<br></br>
    *  KWARC, Jacobs University Bremen<br></br>
    *  http://kwarc.info/projects/krextor/<br></br>
    *<br></br>
    *   Krextor is free software; you can redistribute it and/or<br></br>
    *         modify it under the terms of the GNU Lesser General Public<br></br>
    *         License as published by the Free Software Foundation; either<br></br>
    *         version 2 of the License, or (at your option) any later version.<br></br>
    *<br></br>
    *         This program is distributed in the hope that it will be useful,<br></br>
    *         but WITHOUT ANY WARRANTY; without even the implied warranty of<br></br>
    *         MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU<br></br>
    *         Lesser General Public License for more details.<br></br>
    *<br></br>
    *         You should have received a copy of the GNU Lesser General Public<br></br>
    *         License along with this library; if not, write to the<br></br>
    *         Free Software Foundation, Inc., 59 Temple Place - Suite 330,<br></br>
    *         Boston, MA 02111-1307, USA.<br></br>
    * <br></br>
</span>--&gt;<br></br>
&lt;<span class="xmlverb-element-name"><a name="d72e2">stylesheet</a></span><span class="xmlverb-ns-name"> xmlns:f</span>="<span class="xmlverb-ns-uri">http://fxsl.sf.net/</span>"<span class="xmlverb-ns-name"> xmlns</span>="<span class="xmlverb-ns-uri">http://www.w3.org/1999/XSL/Transform</span>"<span class="xmlverb-ns-name"> xmlns:xs</span>="<span class="xmlverb-ns-uri">http://www.w3.org/2001/XMLSchema</span>"<span class="xmlverb-ns-name"> xmlns:xd</span>="<span class="xmlverb-ns-uri">http://www.pnp-software.com/XSLTdoc</span>"<span class="xmlverb-ns-name"> xmlns:krextor</span>="<span class="xmlverb-ns-uri">http://kwarc.info/projects/krextor</span>"<span class="xmlverb-ns-name"> xmlns:krextor-genuri</span>="<span class="xmlverb-ns-uri">http://kwarc.info/projects/krextor/genuri</span>" <span class="xmlverb-attr-name">xpath-default-namespace</span>="<span class="xmlverb-attr-content">http://www.w3.org/1999/XSL/Transform</span>" <span class="xmlverb-attr-name">exclude-result-prefixes</span>="<span class="xmlverb-attr-content">#all</span>" <span class="xmlverb-attr-name">version</span>="<span class="xmlverb-attr-content">2.0</span>"&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-name"><a name="d72e4">import</a></span> <span class="xmlverb-attr-name">href</span>="<span class="xmlverb-attr-content">util.xsl</span>" /&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span><div class="xd">
    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e6">doc</a></span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">stylesheet</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e8">short</a></span>&gt;<span class="xmlverb-text">Functions that generate URIs for resources found in documents</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">short</span>&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e11">detail</a></span>&gt;&lt;<span class="xmlverb-element-name"><a name="d72e12">p</a></span>&gt;<span class="xmlverb-text">This stylesheet provides functions and templates that generate URIs for resources found in documents</span>&lt;/<span class="xmlverb-element-name">p</span>&gt;&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">detail</span>&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e15">author</a></span>&gt;<span class="xmlverb-text">Christoph Lange</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">author</span>&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e18">copyright</a></span>&gt;<span class="xmlverb-text">Christoph Lange, 2009</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">copyright</span>&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e21">svnId</a></span>&gt;<span class="xmlverb-text">$Id: uri.xsl 2059 2012-03-02 22:12:32Z clange $</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">svnId</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
<br></br>
    </span><div class="xd">
    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e25">doc</a></span>&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e27">short</a></span>&gt;<span class="xmlverb-text">Should URIs like </span>&lt;<span class="xmlverb-element-name"><a name="d72e29">code</a></span>&gt;<span class="xmlverb-text">document#fragment</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text"> automatically be<br></br>
            generated?  Sequence of string values out of </span>&lt;<span class="xmlverb-element-name"><a name="d72e32">code</a></span>&gt;<span class="xmlverb-text">xml-id</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text">, </span>&lt;<span class="xmlverb-element-name"><a name="d72e35">code</a></span>&gt;<span class="xmlverb-text">id</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text">, </span>&lt;<span class="xmlverb-element-name"><a name="d72e38">code</a></span>&gt;<span class="xmlverb-text">document-root-base</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text">, </span>&lt;<span class="xmlverb-element-name"><a name="d72e41">code</a></span>&gt;<span class="xmlverb-text">generate-id</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text">, </span>&lt;<span class="xmlverb-element-name"><a name="d72e45">code</a></span>&gt;<span class="xmlverb-text">pseudo-xpath</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text">, or additional custom values.</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">short</span>&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e49">detail</a></span>&gt;&lt;<span class="xmlverb-element-name"><a name="d72e50">p</a></span>&gt;<span class="xmlverb-text">This parameter is a sequence of string values representing URI generation functions:</span>&lt;/<span class="xmlverb-element-name">p</span>&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-name"><a name="d72e53">dl</a></span>&gt;<span class="xmlverb-text"><br></br>
                </span>&lt;<span class="xmlverb-element-name"><a name="d72e55">dt</a></span>&gt;<span class="xmlverb-text">xml-id</span>&lt;/<span class="xmlverb-element-name">dt</span>&gt;<span class="xmlverb-text"><br></br>
                </span>&lt;<span class="xmlverb-element-name"><a name="d72e58">dd</a></span>&gt;<span class="xmlverb-text">use the </span>&lt;<span class="xmlverb-element-name"><a name="d72e60">a</a></span> <span class="xmlverb-attr-name">href</span>="<span class="xmlverb-attr-content">http://www.w3.org/TR/xml-id/</span>"&gt;<span class="xmlverb-text">xml:id</span>&lt;/<span class="xmlverb-element-name">a</span>&gt;<span class="xmlverb-text"> attribute if available, otherwise nothing</span>&lt;/<span class="xmlverb-element-name">dd</span>&gt;<span class="xmlverb-text"><br></br>
                </span>&lt;<span class="xmlverb-element-name"><a name="d72e64">dt</a></span>&gt;<span class="xmlverb-text">id</span>&lt;/<span class="xmlverb-element-name">dt</span>&gt;<span class="xmlverb-text"><br></br>
                </span>&lt;<span class="xmlverb-element-name"><a name="d72e67">dd</a></span>&gt;<span class="xmlverb-text">use an </span>&lt;<span class="xmlverb-element-name"><a name="d72e69">code</a></span>&gt;<span class="xmlverb-text">id</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text"> attribute if available, otherwise nothing</span>&lt;/<span class="xmlverb-element-name">dd</span>&gt;<span class="xmlverb-text"><br></br>
                </span>&lt;<span class="xmlverb-element-name"><a name="d72e73">dt</a></span>&gt;<span class="xmlverb-text">document-root-base</span>&lt;/<span class="xmlverb-element-name">dt</span>&gt;<span class="xmlverb-text"><br></br>
                </span>&lt;<span class="xmlverb-element-name"><a name="d72e77">dd</a></span>&gt;<span class="xmlverb-text">use the base URI if we are on the root element, otherwise nothing.  Note that for meaningful results you should not pass a manipulated base URI into </span>&lt;<span class="xmlverb-element-name"><a name="d72e79">code</a></span>&gt;<span class="xmlverb-text">create-resource</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text">.</span>&lt;/<span class="xmlverb-element-name">dd</span>&gt;<span class="xmlverb-text"><br></br>
                </span>&lt;<span class="xmlverb-element-name"><a name="d72e83">dt</a></span>&gt;<span class="xmlverb-text">generate-id</span>&lt;/<span class="xmlverb-element-name">dt</span>&gt;<span class="xmlverb-text"><br></br>
                </span>&lt;<span class="xmlverb-element-name"><a name="d72e86">dd</a></span>&gt;<span class="xmlverb-text">generate via </span>&lt;<span class="xmlverb-element-name"><a name="d72e88">a</a></span> <span class="xmlverb-attr-name">href</span>="<span class="xmlverb-attr-content">http://www.w3.org/TR/xslt20/#generate-id</span>"&gt;<span class="xmlverb-text">generate-id()</span>&lt;/<span class="xmlverb-element-name">a</span>&gt;<span class="xmlverb-text"> function (always succeeds)</span>&lt;/<span class="xmlverb-element-name">dd</span>&gt;<span class="xmlverb-text"><br></br>
                </span>&lt;<span class="xmlverb-element-name"><a name="d72e92">dt</a></span>&gt;<span class="xmlverb-text">pseudo-xpath</span>&lt;/<span class="xmlverb-element-name">dt</span>&gt;<span class="xmlverb-text"><br></br>
                </span>&lt;<span class="xmlverb-element-name"><a name="d72e95">dd</a></span>&gt;<span class="xmlverb-text">generate an </span>&lt;<span class="xmlverb-element-name"><a name="d72e97">a</a></span> <span class="xmlverb-attr-name">href</span>="<span class="xmlverb-attr-content">http://www.w3.org/TR/xpath20/</span>"&gt;<span class="xmlverb-text">XPath</span>&lt;/<span class="xmlverb-element-name">a</span>&gt;<span class="xmlverb-text">-like<br></br>
                    expression from the local names and local positions of the<br></br>
                    element and its parents (always succeeds; can lead to clashes<br></br>
                    if elements from different namespaces with the same local names<br></br>
                    are used in the same context or if dashes are used within<br></br>
                    element names; inefficient because the whole XPath<br></br>
                    from the root is newly computed for every element); example:<br></br>
                    </span>&lt;<span class="xmlverb-element-name"><a name="d72e100">code</a></span>&gt;<span class="xmlverb-text">doc-section2-para1</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text"> =<br></br>
                    </span>&lt;<span class="xmlverb-element-name"><a name="d72e103">code</a></span>&gt;<span class="xmlverb-text">/doc/section[2]/para[1]</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;&lt;/<span class="xmlverb-element-name">dd</span>&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;/<span class="xmlverb-element-name">dl</span>&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-name"><a name="d72e107">p</a></span>&gt;<span class="xmlverb-text">The default setting is </span>&lt;<span class="xmlverb-element-name"><a name="d72e109">code</a></span>&gt;<span class="xmlverb-text">('xml-id', 'id', 'document-root-base')</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text">.<br></br>
                If one method fails to generate a URI, the next one in the list is<br></br>
                tried, until one succeeds; otherwise, no resource is created for<br></br>
                the respective node.</span>&lt;/<span class="xmlverb-element-name">p</span>&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-name"><a name="d72e113">p</a></span>&gt;<span class="xmlverb-text">Note that there is no guarantee that </span>&lt;<span class="xmlverb-element-name"><a name="d72e115">code</a></span>&gt;<span class="xmlverb-text">generate-id</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text"> and<br></br>
                </span>&lt;<span class="xmlverb-element-name"><a name="d72e118">code</a></span>&gt;<span class="xmlverb-text">pseudo-xpath</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text"> generate URIs that differ from all </span>&lt;<span class="xmlverb-element-name"><a name="d72e121">a</a></span> <span class="xmlverb-attr-name">href</span>="<span class="xmlverb-attr-content">http://www.w3.org/TR/xml-id/</span>"&gt;<span class="xmlverb-text">xml:id</span>&lt;/<span class="xmlverb-element-name">a</span>&gt;<span class="xmlverb-text">s or ids in the<br></br>
                document.  We leave the responsibility of not creating too obscure<br></br>
                </span>&lt;<span class="xmlverb-element-name"><a name="d72e124">code</a></span>&gt;<span class="xmlverb-text">xml:id</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text">s or </span>&lt;<span class="xmlverb-element-name"><a name="d72e127">code</a></span>&gt;<span class="xmlverb-text">id</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text">s to the document author.</span>&lt;/<span class="xmlverb-element-name">p</span>&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-name"><a name="d72e131">p</a></span>&gt;<span class="xmlverb-text">Also note that any fragment ID that the base URI of the document<br></br>
                already has is discarded and replaced by the generated fragment ID,<br></br>
                if Krextor is instructed to generate one.  More than one fragment<br></br>
                is not allowed by the </span>&lt;<span class="xmlverb-element-name"><a name="d72e133">a</a></span> <span class="xmlverb-attr-name">href</span>="<span class="xmlverb-attr-content">http://www.faqs.org/rfcs/rfc3986.html</span>"&gt;<span class="xmlverb-text">URI RFC 3986</span>&lt;/<span class="xmlverb-element-name">a</span>&gt;<span class="xmlverb-text">.<br></br>
                See </span>&lt;<span class="xmlverb-element-name"><a name="d72e136">a</a></span> <span class="xmlverb-attr-name">href</span>="<span class="xmlverb-attr-content">http://www.aifb.uni-karlsruhe.de/pipermail/swikig/2006-February/000095.html</span>"&gt;<span class="xmlverb-text">this<br></br>
                    e-mail thread from the Semantic Wiki mailing list</span>&lt;/<span class="xmlverb-element-name">a</span>&gt;<span class="xmlverb-text"> for more<br></br>
                background on this in a semantic web context.</span>&lt;/<span class="xmlverb-element-name">p</span>&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">detail</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-name"><a name="d72e142">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">autogenerate-fragment-uris</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:string*</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'xml-id', 'id', 'document-root-base'</span>" /&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span><div class="xd">
    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e144">doc</a></span>&gt;<span class="xmlverb-text">Configures whether relative URIs should be resolved into absolute URIs when generating URIs for resources.  Setting it to </span>&lt;<span class="xmlverb-element-name"><a name="d72e146">code</a></span>&gt;<span class="xmlverb-text">false</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text"> is experimental.</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-name"><a name="d72e151">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">resolve-relative-uris</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:boolean</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">true()</span>" /&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span><div class="xd">
    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e153">doc</a></span>&gt;<span class="xmlverb-text">Resolves a relative URI against a base URI, if URI resolution is globally turned on.</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-name"><a name="d72e156">function</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:resolve-uri</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:anyURI</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e158">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">relative</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:string</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e160">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">base</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:anyURI</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e162">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if ($resolve-relative-uris) then resolve-uri($relative, $base) else $relative</span>" /&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-name">function</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span><div class="xd">
    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e165">doc</a></span>&gt;<span class="xmlverb-text">Controls whether URIs of resources are rewritten from an internal<br></br>
        representation into an external representation (which will be visible<br></br>
        in the extracted RDF).  If set to false (default), the internal URIs of<br></br>
        the input XML documents will also be used in the RDF output.  If true,<br></br>
        any URI that is part of the output RDF will be rewritten.  The way how<br></br>
        URIs are rewritten is determined by the implementation of the<br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e167">code</a></span>&gt;<span class="xmlverb-text">krextor:external-uri</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text"> template in scope.  This module<br></br>
        provides a default implementation that performs a regular expression<br></br>
        replacement, based on the parameters<br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e170">code</a></span>&gt;<span class="xmlverb-text">document-uri-pattern-match</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text"> and<br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e173">code</a></span>&gt;<span class="xmlverb-text">document-uri-pattern-replace</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text">.  In the interest of the </span>&lt;<span class="xmlverb-element-name"><a name="d72e176">a</a></span> <span class="xmlverb-attr-name">href</span>="<span class="xmlverb-attr-content">http://www.w3.org/DesignIssues/LinkedData.html</span>"&gt;<span class="xmlverb-text">linked data<br></br>
            conventions</span>&lt;/<span class="xmlverb-element-name">a</span>&gt;<span class="xmlverb-text">, the external URIs should be retrievable URLs<br></br>
        (pointing to downloadable versions of the original XML<br></br>
        documents).</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-name"><a name="d72e180">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">rewrite-document-uris</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:string</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">'false'</span>" /&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span><div class="xd">
    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e182">doc</a></span>&gt;<span class="xmlverb-text">Internal parameter holding the value of </span>&lt;<span class="xmlverb-element-name"><a name="d72e184">code</a></span>&gt;<span class="xmlverb-text">rewrite-document-uris</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text">, converted to a boolean</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-name"><a name="d72e189">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">rewrite-document-uris-boolean</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:boolean</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$rewrite-document-uris eq 'true'</span>" /&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span><div class="xd">
    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e191">doc</a></span>&gt;<span class="xmlverb-text">Rewrites an internal into an external URI if the parameter </span>&lt;<span class="xmlverb-element-name"><a name="d72e193">code</a></span>&gt;<span class="xmlverb-text">rewrite-document-uris</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text"> is set to </span>&lt;<span class="xmlverb-element-name"><a name="d72e196">code</a></span>&gt;<span class="xmlverb-text">true</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text">.  The actual implementation is provided by a template of the same name.</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-name"><a name="d72e200">function</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:external-uri</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:anyURI</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e202">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">internal-uri</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:anyURI</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e204">choose</a></span>&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-name"><a name="d72e206">when</a></span> <span class="xmlverb-attr-name">test</span>="<span class="xmlverb-attr-content">$rewrite-document-uris-boolean</span>"&gt;<span class="xmlverb-text"><br></br>
                </span>&lt;<span class="xmlverb-element-name"><a name="d72e208">call-template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:external-uri</span>"&gt;<span class="xmlverb-text"><br></br>
                    </span>&lt;<span class="xmlverb-element-name"><a name="d72e210">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">internal-uri</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$internal-uri</span>" /&gt;<span class="xmlverb-text"><br></br>
                </span>&lt;/<span class="xmlverb-element-name">call-template</span>&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;/<span class="xmlverb-element-name">when</span>&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-name"><a name="d72e214">otherwise</a></span>&gt;<span class="xmlverb-text"><br></br>
                </span>&lt;<span class="xmlverb-element-name"><a name="d72e216">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$internal-uri</span>" /&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;/<span class="xmlverb-element-name">otherwise</span>&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-name">choose</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-name">function</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span><div class="xd">
    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e221">doc</a></span>&gt;<span class="xmlverb-text">A regular expression pattern that is matched against any URI to be rewritten by the built-in default implementation of the </span>&lt;<span class="xmlverb-element-name"><a name="d72e223">code</a></span>&gt;<span class="xmlverb-text">krextor:external-uri</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text"> template</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-name"><a name="d72e227">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">document-uri-pattern-match</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:string</span>" /&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span><div class="xd">
    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e229">doc</a></span>&gt;<span class="xmlverb-text">A replacement string (possibly including backreferences to substrings matched by </span>&lt;<span class="xmlverb-element-name"><a name="d72e231">code</a></span>&gt;<span class="xmlverb-text">document-uri-pattern-match</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text">) that controls how URIs are rewritten by the built-in default implementation of the </span>&lt;<span class="xmlverb-element-name"><a name="d72e234">code</a></span>&gt;<span class="xmlverb-text">krextor:external-uri</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text"> template</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-name"><a name="d72e239">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">document-uri-pattern-replace</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:string</span>" /&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span><div class="xd">
    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e241">doc</a></span>&gt;<span class="xmlverb-text">Default implementation of the same-named function.  Rewrites an internal into an external URI by a string replacement according to the<br></br>
        settings of the parameters </span>&lt;<span class="xmlverb-element-name"><a name="d72e243">code</a></span>&gt;<span class="xmlverb-text">document-uri-pattern-match</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text"> and<br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e246">code</a></span>&gt;<span class="xmlverb-text">document-uri-pattern-replace</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text">.<br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-name"><a name="d72e250">template</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:external-uri</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:anyURI</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e252">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">internal-uri</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:anyURI</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e254">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">xs:anyURI( replace($internal-uri, $document-uri-pattern-match, $document-uri-pattern-replace))</span>" /&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span><div class="xd">
    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e257">doc</a></span>&gt;<span class="xmlverb-text">Returns the base URI of the given node, after URI rewriting, if rewriting is enabled via the </span>&lt;<span class="xmlverb-element-name"><a name="d72e259">code</a></span>&gt;<span class="xmlverb-text">rewrite-document-uris</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text"> parameter.</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-name"><a name="d72e263">function</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:base-uri</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:anyURI</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e265">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">node</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">node()</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e267">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">krextor:external-uri(base-uri($node))</span>" /&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-name">function</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span><div class="xd">
    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e270">doc</a></span>&gt;<span class="xmlverb-text">Generates a URI for a fragment of a document; returns the empty<br></br>
        sequence if the fragment ID is empty.</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-name"><a name="d72e274">function</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:fragment-uri-or-null</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:anyURI?</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e276">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">fragment-id</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:string?</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e278">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">base-uri</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:anyURI</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e280">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if ($fragment-id) then krextor:resolve-uri(concat('#', $fragment-id), $base-uri) else ()</span>" /&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-name">function</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span><div class="xd">
    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e283">doc</a></span>&gt;<span class="xmlverb-text">creates an XPath-like string from the path to a node, <br></br>
        e.g. </span>&lt;<span class="xmlverb-element-name"><a name="d72e285">code</a></span>&gt;<span class="xmlverb-text">doc-sect1-para2</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text"> for </span>&lt;<span class="xmlverb-element-name"><a name="d72e288">code</a></span>&gt;<span class="xmlverb-text">/doc/sect[1]/para[2]</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-name"><a name="d72e291">function</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:pseudo-xpath</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:string?</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e293">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">node</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">node()</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;!--<span class="xmlverb-comment"> TODO maybe also for attribute nodes? </span>--&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e297">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if ($node/parent::node() instance of document-node()) then local-name($node) else if ($node/self::*) then concat( krextor:pseudo-xpath($node/parent::node()), '-', local-name($node), count($node/preceding-sibling::node()) + 1 ) else ()</span>" /&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-name">function</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span><div class="xd">
    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e300">doc</a></span>&gt;<span class="xmlverb-text">Generates a URI for a resource using the default generation method and using the base URI of the given node</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-name"><a name="d72e303">function</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:generate-uri</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:anyURI</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e305">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">node</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">node()</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e307">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">krextor:generate-uri($node, krextor:base-uri($node))</span>" /&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-name">function</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span><div class="xd">
    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e310">doc</a></span>&gt;<span class="xmlverb-text">Generates a URI for a resource using the default generation method</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-name"><a name="d72e314">function</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:generate-uri</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:anyURI</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e316">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">node</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">node()</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e318">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">base-uri</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:anyURI</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e320">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">krextor:generate-uri($node, krextor:uri-generation-method($node), $base-uri)</span>" /&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-name">function</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span><div class="xd">
    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e323">doc</a></span>&gt;<span class="xmlverb-text">Generates a URI for a resource</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-name"><a name="d72e326">function</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:generate-uri</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:anyURI?</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e328">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">node</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">node()</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e330">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">autogenerate-fragment-uri</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:string*</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e332">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">base-uri</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:anyURI</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;!--<span class="xmlverb-comment"> What we'd actually like to do is applying a series of _functions_<br></br>
        to ($node, $base-uri), but that doesn't work.  It would involve<br></br>
        currying, and the FXSL implementation of currying breaks nodes in XML<br></br>
        documents </span>--&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e336">value-of</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">f:return-first(krextor:generate-uri-impl(), $autogenerate-fragment-uri, ($node, $base-uri))</span>" /&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-name">function</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span><div class="xd">
    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e339">doc</a></span>&gt;<span class="xmlverb-text">Generates a URI for a given node, using a given base URI as appropriate, using the given method<br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e341">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">method</span>" <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">string</span>"&gt;<span class="xmlverb-text">the identifier of the URI generation method</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">param</span>&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e344">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">params</span>"&gt;<span class="xmlverb-text">a two-item sequence (</span>&lt;<span class="xmlverb-element-name"><a name="d72e346">code</a></span>&gt;<span class="xmlverb-text">node</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text">, </span>&lt;<span class="xmlverb-element-name"><a name="d72e349">code</a></span>&gt;<span class="xmlverb-text">base-uri</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text">)</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">param</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;!--<span class="xmlverb-comment"> Altova XML reports XTTE0780<br></br>
    &lt;function name="krextor:generate-uri-impl" as="xs:anyURI?"&gt;<br></br>
    </span>--&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-name"><a name="d72e356">function</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:generate-uri-impl</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e358">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">method</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:string</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e360">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">params</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">item()+</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e362">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">node</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">node()</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$params[1]</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e364">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">base-uri</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:anyURI</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$params[2]</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e366">variable</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">method-element</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">element()</span>"&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-name"><a name="d72e368">element</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">{concat('krextor-genuri:', $method)}</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-name">variable</span>&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e372">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$method-element</span>"&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-name"><a name="d72e374">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">node</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$node</span>" /&gt;<span class="xmlverb-text"><br></br>
            </span>&lt;<span class="xmlverb-element-name"><a name="d72e376">with-param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">base-uri</span>" <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$base-uri</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;/<span class="xmlverb-element-name">apply-templates</span>&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-name">function</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span><div class="xd">
    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e381">doc</a></span>&gt;<span class="xmlverb-text">Returns the base URI of the document for the root node,<br></br>
        otherwise the empty sequence.</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-name"><a name="d72e384">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">krextor-genuri:document-root-base</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:string?</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e386">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">node</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">node()</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e388">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">base-uri</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:anyURI</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e390">sequence</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">if ($node/parent::node() instance of document-node()) then $base-uri else ()</span>" /&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span><div class="xd">
    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e393">doc</a></span>&gt;<span class="xmlverb-text">Common implementation of the </span>&lt;<span class="xmlverb-element-name"><a name="d72e395">code</a></span>&gt;<span class="xmlverb-text">xml-id</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text">, </span>&lt;<span class="xmlverb-element-name"><a name="d72e398">code</a></span>&gt;<span class="xmlverb-text">id</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text">, </span>&lt;<span class="xmlverb-element-name"><a name="d72e401">code</a></span>&gt;<span class="xmlverb-text">generate-id</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text"> and </span>&lt;<span class="xmlverb-element-name"><a name="d72e404">code</a></span>&gt;<span class="xmlverb-text">pseudo-xpath</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text"> URI generation functions.  They all use the given base URI and append a fragment ID; they differ in how the fragment ID is generated.  The base URI is generally assumed to be the URI of the document that contains the given node.</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-name"><a name="d72e408">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">krextor-genuri:xml-id| krextor-genuri:id| krextor-genuri:generate-id| krextor-genuri:pseudo-xpath</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:string?</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e410">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">node</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">node()</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e412">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">base-uri</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:anyURI</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e414">sequence</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">krextor:fragment-uri-or-null( if (self::krextor-genuri:xml-id and $node/@xml:id) then $node/@xml:id else if (self::krextor-genuri:id and $node/@id) then $node/@id else if (self::krextor-genuri:generate-id) then generate-id($node) else if (self::krextor-genuri:pseudo-xpath) then krextor:pseudo-xpath($node) else (), $base-uri)</span>" /&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span><div class="xd">
    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e417">doc</a></span>&gt;<span class="xmlverb-text">Returns an FXSL reference to the<br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e419">code</a></span>&gt;<span class="xmlverb-text">krextor:generate-uri-impl</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text"> function.</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-name"><a name="d72e423">function</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:generate-uri-impl</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">element(krextor:generate-uri-impl)</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-nsprefix">krextor</span>:<span class="xmlverb-element-name"><a name="d72e425">generate-uri-impl</a></span> /&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-name">function</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span><div class="xd">
    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e429">doc</a></span>&gt;<span class="xmlverb-text">FXSL template representing the two-argument </span>&lt;<span class="xmlverb-element-name"><a name="d72e431">code</a></span>&gt;<span class="xmlverb-text">krextor:generate-uri-impl</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text"> function</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-name"><a name="d72e435">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">krextor:generate-uri-impl</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:anyURI?</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">f:FXSL</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e437">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">arg1</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:string</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e439">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">arg2</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">item()+</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e441">sequence</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">krextor:generate-uri-impl($arg1, $arg2)</span>" /&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span><div class="xd">
    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e444">doc</a></span>&gt;<span class="xmlverb-text">Returns the method in which a URI will be generated for the current node unless a different explicit subject URI is passed to </span>&lt;<span class="xmlverb-element-name"><a name="d72e446">code</a></span>&gt;<span class="xmlverb-text">krextor:create-resource</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text">; extraction modules can override this.</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-name"><a name="d72e450">template</a></span> <span class="xmlverb-attr-name">match</span>="<span class="xmlverb-attr-content">node()</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:uri-generation-method</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:string*</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e452">sequence</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$autogenerate-fragment-uris</span>" /&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-name">template</span>&gt;<span class="xmlverb-text"><br></br>
<br></br>
    </span><div class="xd">
    &lt;<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name"><a name="d72e455">doc</a></span>&gt;<span class="xmlverb-text">Returns the method in which a URI will be generated for the given node unless a different explicit subject URI is passed to </span>&lt;<span class="xmlverb-element-name"><a name="d72e457">code</a></span>&gt;<span class="xmlverb-text">krextor:create-resource</span>&lt;/<span class="xmlverb-element-name">code</span>&gt;<span class="xmlverb-text">; this calls the template running in the namesake mode.</span>&lt;/<span class="xmlverb-element-nsprefix">xd</span>:<span class="xmlverb-element-name">doc</span>&gt;</div><span class="xmlverb-text"><br></br>
    </span>&lt;<span class="xmlverb-element-name"><a name="d72e461">function</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">krextor:uri-generation-method</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">xs:string*</span>"&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e463">param</a></span> <span class="xmlverb-attr-name">name</span>="<span class="xmlverb-attr-content">node</span>" <span class="xmlverb-attr-name">as</span>="<span class="xmlverb-attr-content">node()</span>" /&gt;<span class="xmlverb-text"><br></br>
        </span>&lt;<span class="xmlverb-element-name"><a name="d72e465">apply-templates</a></span> <span class="xmlverb-attr-name">select</span>="<span class="xmlverb-attr-content">$node</span>" <span class="xmlverb-attr-name">mode</span>="<span class="xmlverb-attr-content">krextor:uri-generation-method</span>" /&gt;<span class="xmlverb-text"><br></br>
    </span>&lt;/<span class="xmlverb-element-name">function</span>&gt;<span class="xmlverb-text"><br></br>
</span>&lt;/<span class="xmlverb-element-name">stylesheet</span>&gt;<br></br>
&lt;!--<span class="xmlverb-comment"><br></br>
Local Variables:<br></br>
mode: nxml<br></br>
nxml-child-indent: 4<br></br>
End:<br></br>
</span>--&gt;<br></br>
</div>
</tt><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br><br></br>v
         </body></html>
